var SplunkRumRecorder=function(){"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function __rest$1(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}var _globalThis="object"===("undefined"==typeof globalThis?"undefined":_typeof(globalThis))?globalThis:"object"===("undefined"==typeof self?"undefined":_typeof(self))?self:"object"===("undefined"==typeof window?"undefined":_typeof(window))?window:"object"===("undefined"==typeof global?"undefined":_typeof(global))?global:{},VERSION$2="1.1.0",re=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function _makeCompatibilityCheck(e){var t=new Set([e]),r=new Set,n=e.match(re);if(!n)return function(){return!1};var o=+n[1],i=+n[2],a=+n[3];if(null!=n[4])return function(t){return t===e};function s(e){return r.add(e),!1}function l(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var n=e.match(re);if(!n)return s(e);var u=+n[1],c=+n[2],f=+n[3];return null!=n[4]||o!==u?s(e):0===o?i===c&&a<=f?l(e):s(e):i<=c?l(e):s(e)}}var isCompatible=_makeCompatibilityCheck(VERSION$2),major=VERSION$2.split(".")[0],GLOBAL_OPENTELEMETRY_API_KEY=Symbol.for("opentelemetry.js.api."+major),_global=_globalThis;function registerGlobal(e,t,r,n){var o;void 0===n&&(n=!1);var i=_global[GLOBAL_OPENTELEMETRY_API_KEY]=null!==(o=_global[GLOBAL_OPENTELEMETRY_API_KEY])&&void 0!==o?o:{version:VERSION$2};if(!n&&i[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(a.stack||a.message),!1}if(i.version!==VERSION$2){a=new Error("@opentelemetry/api: All API registration versions must match");return r.error(a.stack||a.message),!1}return i[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+VERSION$2+"."),!0}function getGlobal(e){var t,r,n=null===(t=_global[GLOBAL_OPENTELEMETRY_API_KEY])||void 0===t?void 0:t.version;if(n&&isCompatible(n))return null===(r=_global[GLOBAL_OPENTELEMETRY_API_KEY])||void 0===r?void 0:r[e]}function unregisterGlobal(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+VERSION$2+".");var r=_global[GLOBAL_OPENTELEMETRY_API_KEY];r&&delete r[e]}var DiagComponentLogger=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return logProxy("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return logProxy("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return logProxy("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return logProxy("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return logProxy("verbose",this._namespace,e)},e}(),DiagLogLevel;function logProxy(e,t,r){var n=getGlobal("diag");if(n)return r.unshift(t),n[e].apply(n,r)}function createLogLevelDiagLogger(e,t){function r(r,n){var o=t[r];return"function"==typeof o&&e>=n?o.bind(t):function(){}}return e<DiagLogLevel.NONE?e=DiagLogLevel.NONE:e>DiagLogLevel.ALL&&(e=DiagLogLevel.ALL),t=t||{},{error:r("error",DiagLogLevel.ERROR),warn:r("warn",DiagLogLevel.WARN),info:r("info",DiagLogLevel.INFO),debug:r("debug",DiagLogLevel.DEBUG),verbose:r("verbose",DiagLogLevel.VERBOSE)}}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(DiagLogLevel||(DiagLogLevel={}));var API_NAME$3="diag",DiagAPI=function(){function e(){function e(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=getGlobal("diag");if(n)return n[e].apply(n,t)}}var t=this;t.setLogger=function(e,r){var n,o;if(void 0===r&&(r=DiagLogLevel.INFO),e===t){var i=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(n=i.stack)&&void 0!==n?n:i.message),!1}var a=getGlobal("diag"),s=createLogLevelDiagLogger(r,e);if(a){var l=null!==(o=(new Error).stack)&&void 0!==o?o:"<failed to generate stacktrace>";a.warn("Current logger will be overwritten from "+l),s.warn("Current logger will overwrite one already registered from "+l)}return registerGlobal("diag",s,t,!0)},t.disable=function(){unregisterGlobal(API_NAME$3,t)},t.createComponentLogger=function(e){return new DiagComponentLogger(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),BaggageImpl=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){return[e[0],e[1]]}))},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=new e(this._entries),o=0,i=t;o<i.length;o++){var a=i[o];n._entries.delete(a)}return n},e.prototype.clear=function(){return new e},e}();function createBaggage(e){return void 0===e&&(e={}),new BaggageImpl(new Map(Object.entries(e)))}DiagAPI.instance();var defaultTextMapGetter={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},defaultTextMapSetter={set:function(e,t,r){null!=e&&(e[t]=r)}};function createContextKey(e){return Symbol.for(e)}var BaseContext=function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var o=new e(r._currentContext);return o._currentContext.set(t,n),o},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}},ROOT_CONTEXT=new BaseContext,__spreadArray$3=window&&window.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},NoopContextManager=function(){function e(){}return e.prototype.active=function(){return ROOT_CONTEXT},e.prototype.with=function(e,t,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];return t.call.apply(t,__spreadArray$3([r],n))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),__spreadArray$2=window&&window.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},API_NAME$2="context",NOOP_CONTEXT_MANAGER=new NoopContextManager,ContextAPI=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return registerGlobal(API_NAME$2,e,DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,r){for(var n,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(n=this._getContextManager()).with.apply(n,__spreadArray$2([e,t,r],o))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return getGlobal(API_NAME$2)||NOOP_CONTEXT_MANAGER},e.prototype.disable=function(){this._getContextManager().disable(),unregisterGlobal(API_NAME$2,DiagAPI.instance())},e}(),TraceFlags;!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(TraceFlags||(TraceFlags={}));var INVALID_SPANID="0000000000000000",INVALID_TRACEID="00000000000000000000000000000000",INVALID_SPAN_CONTEXT={traceId:INVALID_TRACEID,spanId:INVALID_SPANID,traceFlags:TraceFlags.NONE},NonRecordingSpan=function(){function e(e){void 0===e&&(e=INVALID_SPAN_CONTEXT),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),SPAN_KEY=createContextKey("OpenTelemetry Context Key SPAN");function getSpan(e){return e.getValue(SPAN_KEY)||void 0}function setSpan(e,t){return e.setValue(SPAN_KEY,t)}function deleteSpan(e){return e.deleteValue(SPAN_KEY)}function setSpanContext(e,t){return setSpan(e,new NonRecordingSpan(t))}function getSpanContext(e){var t;return null===(t=getSpan(e))||void 0===t?void 0:t.spanContext()}var VALID_TRACEID_REGEX=/^([0-9a-f]{32})$/i,VALID_SPANID_REGEX=/^[0-9a-f]{16}$/i;function isValidTraceId(e){return VALID_TRACEID_REGEX.test(e)&&e!==INVALID_TRACEID}function isValidSpanId(e){return VALID_SPANID_REGEX.test(e)&&e!==INVALID_SPANID}function isSpanContextValid(e){return isValidTraceId(e.traceId)&&isValidSpanId(e.spanId)}function wrapSpanContext(e){return new NonRecordingSpan(e)}var context$1=ContextAPI.getInstance(),NoopTracer=function(){function e(){}return e.prototype.startSpan=function(e,t,r){if(Boolean(null==t?void 0:t.root))return new NonRecordingSpan;var n=r&&getSpanContext(r);return isSpanContext(n)&&isSpanContextValid(n)?new NonRecordingSpan(n):new NonRecordingSpan},e.prototype.startActiveSpan=function(e,t,r,n){var o,i,a;if(!(arguments.length<2)){2===arguments.length?a=t:3===arguments.length?(o=t,a=r):(o=t,i=r,a=n);var s=null!=i?i:context$1.active(),l=this.startSpan(e,o,s),u=setSpan(s,l);return context$1.with(u,a,void 0,l)}},e}();function isSpanContext(e){return"object"===_typeof(e)&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}var NOOP_TRACER=new NoopTracer,ProxyTracer=function(){function e(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,n){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):NOOP_TRACER},e}(),NoopTracerProvider=function(){function e(){}return e.prototype.getTracer=function(e,t,r){return new NoopTracer},e}(),NOOP_TRACER_PROVIDER=new NoopTracerProvider,ProxyTracerProvider=function(){function e(){}return e.prototype.getTracer=function(e,t,r){var n;return null!==(n=this.getDelegateTracer(e,t,r))&&void 0!==n?n:new ProxyTracer(this,e,t,r)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:NOOP_TRACER_PROVIDER},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,r){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t,r)},e}(),SamplingDecision,SpanKind,SpanStatusCode;!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(SamplingDecision||(SamplingDecision={})),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(SpanKind||(SpanKind={})),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(SpanStatusCode||(SpanStatusCode={}));var API_NAME$1="trace",TraceAPI=function(){function e(){this._proxyTracerProvider=new ProxyTracerProvider,this.wrapSpanContext=wrapSpanContext,this.isSpanContextValid=isSpanContextValid,this.deleteSpan=deleteSpan,this.getSpan=getSpan,this.getSpanContext=getSpanContext,this.setSpan=setSpan,this.setSpanContext=setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=registerGlobal(API_NAME$1,this._proxyTracerProvider,DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return getGlobal(API_NAME$1)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){unregisterGlobal(API_NAME$1,DiagAPI.instance()),this._proxyTracerProvider=new ProxyTracerProvider},e}(),NoopTextMapPropagator=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),BAGGAGE_KEY=createContextKey("OpenTelemetry Baggage Key");function getBaggage(e){return e.getValue(BAGGAGE_KEY)||void 0}function setBaggage(e,t){return e.setValue(BAGGAGE_KEY,t)}function deleteBaggage(e){return e.deleteValue(BAGGAGE_KEY)}var API_NAME="propagation",NOOP_TEXT_MAP_PROPAGATOR=new NoopTextMapPropagator,PropagationAPI=function(){function e(){this.createBaggage=createBaggage,this.getBaggage=getBaggage,this.setBaggage=setBaggage,this.deleteBaggage=deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return registerGlobal(API_NAME,e,DiagAPI.instance())},e.prototype.inject=function(e,t,r){return void 0===r&&(r=defaultTextMapSetter),this._getGlobalPropagator().inject(e,t,r)},e.prototype.extract=function(e,t,r){return void 0===r&&(r=defaultTextMapGetter),this._getGlobalPropagator().extract(e,t,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){unregisterGlobal(API_NAME,DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return getGlobal(API_NAME)||NOOP_TEXT_MAP_PROPAGATOR},e}(),context=ContextAPI.getInstance(),trace=TraceAPI.getInstance();PropagationAPI.getInstance(),DiagAPI.instance();var _assign=function(){return _assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_assign.apply(this,arguments)},NodeType;function __rest(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$1(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function __spreadArray$1(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function isElement(e){return e.nodeType===e.ELEMENT_NODE}function isShadowRoot(e){var t,r=null===(t=e)||void 0===t?void 0:t.host;return Boolean(r&&r.shadowRoot&&r.shadowRoot===e)}function maskInputValue(e){var t=e.maskInputOptions,r=e.tagName,n=e.type,o=e.value,i=e.maskInputFn,a=o||"";return(t[r.toLowerCase()]||t[n])&&(a=i?i(a):"*".repeat(a.length)),a}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(NodeType||(NodeType={}));var ORIGINAL_ATTRIBUTE_NAME="__rrweb_original__";function is2DCanvasBlank(e){var t=e.getContext("2d");if(!t)return!0;for(var r=0;r<e.width;r+=50)for(var n=0;n<e.height;n+=50){var o=t.getImageData,i=ORIGINAL_ATTRIBUTE_NAME in o?o[ORIGINAL_ATTRIBUTE_NAME]:o;if(new Uint32Array(i.call(t,r,n,Math.min(50,e.width-r),Math.min(50,e.height-n)).data.buffer).some((function(e){return 0!==e})))return!1}return!0}var _id=1,tagNameRegex=new RegExp("[^a-z0-9-_:]"),IGNORED_NODE=-2,canvasService,canvasCtx;function genId(){return _id++}function getValidTagName(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return tagNameRegex.test(t)?"div":t}function getCssRulesString(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(getCssRuleString).join(""):null}catch(e){return null}}function getCssRuleString(e){var t=e.cssText;if(isCSSImportRule(e))try{t=getCssRulesString(e.styleSheet)||t}catch(e){}return t}function isCSSImportRule(e){return"styleSheet"in e}function stringifyStyleSheet(e){return e.cssRules?Array.from(e.cssRules).map((function(e){return e.cssText||""})).join(""):""}function extractOrigin(e){return(e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0]).split("?")[0]}var URL_IN_CSS_REF=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,RELATIVE_PATH=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,DATA_URI=/^(data:)([^,]*),(.*)/i;function absoluteToStylesheet(e,t){return(e||"").replace(URL_IN_CSS_REF,(function(e,r,n,o,i,a){var s=n||i||a,l=r||o||"";if(!s)return e;if(!RELATIVE_PATH.test(s))return"url("+l+s+l+")";if(DATA_URI.test(s))return"url("+l+s+l+")";if("/"===s[0])return"url("+l+(extractOrigin(t)+s)+l+")";var u=t.split("/"),c=s.split("/");u.pop();for(var f=0,p=c;f<p.length;f++){var d=p[f];"."!==d&&(".."===d?u.pop():u.push(d))}return"url("+l+u.join("/")+l+")"}))}var SRCSET_NOT_SPACES=/^[^ \t\n\r\u000c]+/,SRCSET_COMMAS_OR_SPACES=/^[, \t\n\r\u000c]+/;function getAbsoluteSrcsetString(e,t){if(""===t.trim())return t;var r=0;function n(e){var n,o=e.exec(t.substring(r));return o?(n=o[0],r+=n.length,n):""}for(var o=[];n(SRCSET_COMMAS_OR_SPACES),!(r>=t.length);){var i=n(SRCSET_NOT_SPACES);if(","===i.slice(-1))i=absoluteToDoc(e,i.substring(0,i.length-1)),o.push(i);else{var a="";i=absoluteToDoc(e,i);for(var s=!1;;){var l=t.charAt(r);if(""===l){o.push((i+a).trim());break}if(s)")"===l&&(s=!1);else{if(","===l){r+=1,o.push((i+a).trim());break}"("===l&&(s=!0)}a+=l,r+=1}}}return o.join(", ")}function absoluteToDoc(e,t){if(!t||""===t.trim())return t;var r=e.createElement("a");return r.href=t,r.href}function isSVGElement(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function getHref(){var e=document.createElement("a");return e.href="",e.href}function transformAttribute(e,t,r,n){return"src"===r||"href"===r&&n||"xlink:href"===r&&n&&"#"!==n[0]?absoluteToDoc(e,n):"background"!==r||!n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===r&&n?getAbsoluteSrcsetString(e,n):"style"===r&&n?absoluteToStylesheet(n,getHref()):"object"===t&&"data"===r&&n?absoluteToDoc(e,n):n:absoluteToDoc(e,n)}function _isBlockedElement(e,t,r){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var n=0;n<e.classList.length;n++){var o=e.classList[n];if(t.test(o))return!0}return!!r&&e.matches(r)}function needMaskingText(e,t,r){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var n=0;n<e.classList.length;n++){var o=e.classList[n];if(t.test(o))return!0}return!(!r||!e.matches(r))||needMaskingText(e.parentNode,t,r)}return e.nodeType,e.TEXT_NODE,needMaskingText(e.parentNode,t,r)}function onceIframeLoaded(e,t,r){var n=e.contentWindow;if(n){var o,i=!1;try{o=n.document.readyState}catch(e){return}if("complete"===o){var a="about:blank";n.location.href===a&&e.src!==a&&""!==e.src?e.addEventListener("load",t):setTimeout(t,0)}else{var s=setTimeout((function(){i||(t(),i=!0)}),r);e.addEventListener("load",(function(){clearTimeout(s),i=!0,t()}))}}}function serializeNode(e,t){var r,n,o=t.doc,i=t.blockClass,a=t.blockSelector,s=t.maskTextClass,l=t.maskTextSelector,u=t.inlineStylesheet,c=t.maskInputOptions,f=void 0===c?{}:c,p=t.maskTextFn,d=t.maskInputFn,h=t.dataURLOptions,m=void 0===h?{}:h,v=t.inlineImages,y=t.recordCanvas,g=t.keepIframeSrcFn;if(o.__sn){var b=o.__sn.id;n=1===b?void 0:b}switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:NodeType.Document,childNodes:[],compatMode:e.compatMode,rootId:n}:{type:NodeType.Document,childNodes:[],rootId:n};case e.DOCUMENT_TYPE_NODE:return{type:NodeType.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:n};case e.ELEMENT_NODE:for(var _=_isBlockedElement(e,i,a),S=getValidTagName(e),E={},w=0,T=Array.from(e.attributes);w<T.length;w++){var R=T[w],I=R.name,A=R.value;E[I]=transformAttribute(o,S,I,A)}if("link"===S&&u){var N=Array.from(o.styleSheets).find((function(t){return t.href===e.href})),C=null;N&&(C=getCssRulesString(N)),C&&(delete E.rel,delete E.href,E._cssText=absoluteToStylesheet(C,N.href))}if("style"===S&&e.sheet&&!(e.innerText||e.textContent||"").trim().length)(C=getCssRulesString(e.sheet))&&(E._cssText=absoluteToStylesheet(C,getHref()));if("input"===S||"textarea"===S||"select"===S){A=e.value;"radio"!==E.type&&"checkbox"!==E.type&&"submit"!==E.type&&"button"!==E.type&&A?E.value=maskInputValue({type:E.type,tagName:S,value:A,maskInputOptions:f,maskInputFn:d}):e.checked&&(E.checked=e.checked)}if("option"===S&&(e.selected&&!f.select?E.selected=!0:delete E.selected),"canvas"===S&&y)if("2d"===e.__context)is2DCanvasBlank(e)||(E.rr_dataURL=e.toDataURL(m.type,m.quality));else if(!("__context"in e)){var x=e.toDataURL(m.type,m.quality),O=document.createElement("canvas");O.width=e.width,O.height=e.height,x!==O.toDataURL(m.type,m.quality)&&(E.rr_dataURL=x)}if("img"===S&&v){canvasService||(canvasService=o.createElement("canvas"),canvasCtx=canvasService.getContext("2d"));var M=e,L=M.crossOrigin;M.crossOrigin="anonymous";var k=function(){try{canvasService.width=M.naturalWidth,canvasService.height=M.naturalHeight,canvasCtx.drawImage(M,0,0),E.rr_dataURL=canvasService.toDataURL(m.type,m.quality)}catch(e){console.warn("Cannot inline img src="+M.currentSrc+"! Error: "+e)}L?E.crossOrigin=L:delete E.crossOrigin};M.complete&&0!==M.naturalWidth?k():M.onload=k}if("audio"!==S&&"video"!==S||(E.rr_mediaState=e.paused?"paused":"played",E.rr_mediaCurrentTime=e.currentTime),e.scrollLeft&&(E.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(E.rr_scrollTop=e.scrollTop),_){var D=e.getBoundingClientRect(),P=D.width,$=D.height;E={class:E.class,rr_width:P+"px",rr_height:$+"px"}}return"iframe"!==S||g(E.src)||(e.contentDocument||(E.rr_src=E.src),delete E.src),{type:NodeType.Element,tagName:S,attributes:E,childNodes:[],isSVG:isSVGElement(e)||void 0,needBlock:_,rootId:n};case e.TEXT_NODE:var B=e.parentNode&&e.parentNode.tagName,F=e.textContent,V="STYLE"===B||void 0,W="SCRIPT"===B||void 0;if(V&&F){try{e.nextSibling||e.previousSibling||(null===(r=e.parentNode.sheet)||void 0===r?void 0:r.cssRules)&&(F=stringifyStyleSheet(e.parentNode.sheet))}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: "+t,e)}F=absoluteToStylesheet(F,getHref())}return W&&(F="SCRIPT_PLACEHOLDER"),!V&&!W&&needMaskingText(e,s,l)&&F&&(F=p?p(F):F.replace(/[\S]/g,"*")),{type:NodeType.Text,textContent:F||"",isStyle:V,rootId:n};case e.CDATA_SECTION_NODE:return{type:NodeType.CDATA,textContent:"",rootId:n};case e.COMMENT_NODE:return{type:NodeType.Comment,textContent:e.textContent||"",rootId:n};default:return!1}}function lowerIfExists(e){return void 0===e?"":e.toLowerCase()}function slimDOMExcluded(e,t){if(t.comment&&e.type===NodeType.Comment)return!0;if(e.type===NodeType.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(lowerIfExists(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===lowerIfExists(e.attributes.name)||"icon"===lowerIfExists(e.attributes.rel)||"apple-touch-icon"===lowerIfExists(e.attributes.rel)||"shortcut icon"===lowerIfExists(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&lowerIfExists(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(lowerIfExists(e.attributes.property).match(/^(og|twitter|fb):/)||lowerIfExists(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===lowerIfExists(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===lowerIfExists(e.attributes.name)||"googlebot"===lowerIfExists(e.attributes.name)||"bingbot"===lowerIfExists(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===lowerIfExists(e.attributes.name)||"generator"===lowerIfExists(e.attributes.name)||"framework"===lowerIfExists(e.attributes.name)||"publisher"===lowerIfExists(e.attributes.name)||"progid"===lowerIfExists(e.attributes.name)||lowerIfExists(e.attributes.property).match(/^article:/)||lowerIfExists(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===lowerIfExists(e.attributes.name)||"yandex-verification"===lowerIfExists(e.attributes.name)||"csrf-token"===lowerIfExists(e.attributes.name)||"p:domain_verify"===lowerIfExists(e.attributes.name)||"verify-v1"===lowerIfExists(e.attributes.name)||"verification"===lowerIfExists(e.attributes.name)||"shopify-checkout-api-token"===lowerIfExists(e.attributes.name)))return!0}}return!1}function serializeNodeWithId(e,t){var r,n=t.doc,o=t.map,i=t.blockClass,a=t.blockSelector,s=t.maskTextClass,l=t.maskTextSelector,u=t.skipChild,c=void 0!==u&&u,f=t.inlineStylesheet,p=void 0===f||f,d=t.maskInputOptions,h=void 0===d?{}:d,m=t.maskTextFn,v=t.maskInputFn,y=t.slimDOMOptions,g=t.dataURLOptions,b=void 0===g?{}:g,_=t.inlineImages,S=void 0!==_&&_,E=t.recordCanvas,w=void 0!==E&&E,T=t.onSerialize,R=t.onIframeLoad,I=t.iframeLoadTimeout,A=void 0===I?5e3:I,N=t.keepIframeSrcFn,C=void 0===N?function(){return!1}:N,x=t.preserveWhiteSpace,O=void 0===x||x,M=serializeNode(e,{doc:n,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:l,inlineStylesheet:p,maskInputOptions:h,maskTextFn:m,maskInputFn:v,dataURLOptions:b,inlineImages:S,recordCanvas:w,keepIframeSrcFn:C});if(!M)return console.warn(e,"not serialized"),null;r="__sn"in e?e.__sn.id:slimDOMExcluded(M,y)||!O&&M.type===NodeType.Text&&!M.isStyle&&!M.textContent.replace(/^\s+|\s+$/gm,"").length?IGNORED_NODE:genId();var L=Object.assign(M,{id:r});if(e.__sn=L,r===IGNORED_NODE)return null;o[r]=e,T&&T(e);var k=!c;if(L.type===NodeType.Element&&(k=k&&!L.needBlock,delete L.needBlock,e.shadowRoot&&(L.isShadowHost=!0)),(L.type===NodeType.Document||L.type===NodeType.Element)&&k){y.headWhitespace&&M.type===NodeType.Element&&"head"===M.tagName&&(O=!1);for(var D={doc:n,map:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:l,skipChild:c,inlineStylesheet:p,maskInputOptions:h,maskTextFn:m,maskInputFn:v,slimDOMOptions:y,dataURLOptions:b,inlineImages:S,recordCanvas:w,preserveWhiteSpace:O,onSerialize:T,onIframeLoad:R,iframeLoadTimeout:A,keepIframeSrcFn:C},P=0,$=Array.from(e.childNodes);P<$.length;P++){(V=serializeNodeWithId($[P],D))&&L.childNodes.push(V)}if(isElement(e)&&e.shadowRoot)for(var B=0,F=Array.from(e.shadowRoot.childNodes);B<F.length;B++){var V;(V=serializeNodeWithId(F[B],D))&&(V.isShadow=!0,L.childNodes.push(V))}}return e.parentNode&&isShadowRoot(e.parentNode)&&(L.isShadow=!0),L.type===NodeType.Element&&"iframe"===L.tagName&&onceIframeLoaded(e,(function(){var t=e.contentDocument;if(t&&R){var r=serializeNodeWithId(t,{doc:t,map:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskTextFn:m,maskInputFn:v,slimDOMOptions:y,dataURLOptions:b,inlineImages:S,recordCanvas:w,preserveWhiteSpace:O,onSerialize:T,onIframeLoad:R,iframeLoadTimeout:A,keepIframeSrcFn:C});r&&R(e,r)}}),A),L}function snapshot(e,t){var r=t||{},n=r.blockClass,o=void 0===n?"rr-block":n,i=r.blockSelector,a=void 0===i?null:i,s=r.maskTextClass,l=void 0===s?"rr-mask":s,u=r.maskTextSelector,c=void 0===u?null:u,f=r.inlineStylesheet,p=void 0===f||f,d=r.inlineImages,h=void 0!==d&&d,m=r.recordCanvas,v=void 0!==m&&m,y=r.maskAllInputs,g=void 0!==y&&y,b=r.maskTextFn,_=r.maskInputFn,S=r.slimDOM,E=void 0!==S&&S,w=r.dataURLOptions,T=r.preserveWhiteSpace,R=r.onSerialize,I=r.onIframeLoad,A=r.iframeLoadTimeout,N=r.keepIframeSrcFn,C={};return[serializeNodeWithId(e,{doc:e,map:C,blockClass:o,blockSelector:a,maskTextClass:l,maskTextSelector:c,skipChild:!1,inlineStylesheet:p,maskInputOptions:!0===g?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===g?{password:!0}:g,maskTextFn:b,maskInputFn:_,slimDOMOptions:!0===E||"all"===E?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===E,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===E?{}:E,dataURLOptions:w,inlineImages:h,recordCanvas:v,preserveWhiteSpace:T,onSerialize:R,onIframeLoad:I,iframeLoadTimeout:A,keepIframeSrcFn:void 0===N?function(){return!1}:N}),C]}var commentre=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function parse(e,t){void 0===t&&(t={});var r=1,n=1;function o(e){var t=e.match(/\n/g);t&&(r+=t.length);var o=e.lastIndexOf("\n");n=-1===o?n+e.length:e.length-o}function i(){var e={line:r,column:n};return function(t){return t.position=new a(e),d(),t}}var a=function(e){this.start=e,this.end={line:r,column:n},this.source=t.source};a.prototype.content=e;var s=[];function l(o){var i=new Error(t.source+":"+r+":"+n+": "+o);if(i.reason=o,i.filename=t.source,i.line=r,i.column=n,i.source=e,!t.silent)throw i;s.push(i)}function u(){return p(/^{\s*/)}function c(){return p(/^}/)}function f(){var t,r=[];for(d(),h(r);e.length&&"}"!==e.charAt(0)&&(t=R()||I());)!1!==t&&(r.push(t),h(r));return r}function p(t){var r=t.exec(e);if(r){var n=r[0];return o(n),e=e.slice(n.length),r}}function d(){p(/^\s*/)}function h(e){var t;for(void 0===e&&(e=[]);t=m();)!1!==t&&e.push(t),t=m();return e}function m(){var t=i();if("/"===e.charAt(0)&&"*"===e.charAt(1)){for(var r=2;""!==e.charAt(r)&&("*"!==e.charAt(r)||"/"!==e.charAt(r+1));)++r;if(r+=2,""===e.charAt(r-1))return l("End of comment missing");var a=e.slice(2,r-2);return n+=2,o(a),e=e.slice(r),n+=2,t({type:"comment",comment:a})}}function v(){var e=p(/^([^{]+)/);if(e)return trim(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(e){return e.replace(/,/g,"‌")})).split(/\s*(?![^(]*\)),\s*/).map((function(e){return e.replace(/\u200C/g,",")}))}function y(){var e=i(),t=p(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(t){var r=trim(t[0]);if(!p(/^:\s*/))return l("property missing ':'");var n=p(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),o=e({type:"declaration",property:r.replace(commentre,""),value:n?trim(n[0]).replace(commentre,""):""});return p(/^[;\s]*/),o}}function g(){var e,t=[];if(!u())return l("missing '{'");for(h(t);e=y();)!1!==e&&(t.push(e),h(t)),e=y();return c()?t:l("missing '}'")}function b(){for(var e,t=[],r=i();e=p(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),p(/^,\s*/);if(t.length)return r({type:"keyframe",values:t,declarations:g()})}var _,S=T("import"),E=T("charset"),w=T("namespace");function T(e){var t=new RegExp("^@"+e+"\\s*([^;]+);");return function(){var r=i(),n=p(t);if(n){var o={type:e};return o[e]=n[1].trim(),r(o)}}}function R(){if("@"===e[0])return function(){var e=i(),t=p(/^@([-\w]+)?keyframes\s*/);if(t){var r=t[1];if(!(t=p(/^([-\w]+)\s*/)))return l("@keyframes missing name");var n,o=t[1];if(!u())return l("@keyframes missing '{'");for(var a=h();n=b();)a.push(n),a=a.concat(h());return c()?e({type:"keyframes",name:o,vendor:r,keyframes:a}):l("@keyframes missing '}'")}}()||function(){var e=i(),t=p(/^@media *([^{]+)/);if(t){var r=trim(t[1]);if(!u())return l("@media missing '{'");var n=h().concat(f());return c()?e({type:"media",media:r,rules:n}):l("@media missing '}'")}}()||function(){var e=i(),t=p(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return e({type:"custom-media",name:trim(t[1]),media:trim(t[2])})}()||function(){var e=i(),t=p(/^@supports *([^{]+)/);if(t){var r=trim(t[1]);if(!u())return l("@supports missing '{'");var n=h().concat(f());return c()?e({type:"supports",supports:r,rules:n}):l("@supports missing '}'")}}()||S()||E()||w()||function(){var e=i(),t=p(/^@([-\w]+)?document *([^{]+)/);if(t){var r=trim(t[1]),n=trim(t[2]);if(!u())return l("@document missing '{'");var o=h().concat(f());return c()?e({type:"document",document:n,vendor:r,rules:o}):l("@document missing '}'")}}()||function(){var e=i();if(p(/^@page */)){var t=v()||[];if(!u())return l("@page missing '{'");for(var r,n=h();r=y();)n.push(r),n=n.concat(h());return c()?e({type:"page",selectors:t,declarations:n}):l("@page missing '}'")}}()||function(){var e=i();if(p(/^@host\s*/)){if(!u())return l("@host missing '{'");var t=h().concat(f());return c()?e({type:"host",rules:t}):l("@host missing '}'")}}()||function(){var e=i();if(p(/^@font-face\s*/)){if(!u())return l("@font-face missing '{'");for(var t,r=h();t=y();)r.push(t),r=r.concat(h());return c()?e({type:"font-face",declarations:r}):l("@font-face missing '}'")}}()}function I(){var e=i(),t=v();return t?(h(),e({type:"rule",selectors:t,declarations:g()})):l("selector missing")}return addParent((_=f(),{type:"stylesheet",stylesheet:{source:t.source,rules:_,parsingErrors:s}}))}function trim(e){return e?e.replace(/^\s+|\s+$/g,""):""}function addParent(e,t){for(var r=e&&"string"==typeof e.type,n=r?e:t,o=0,i=Object.keys(e);o<i.length;o++){var a=e[i[o]];Array.isArray(a)?a.forEach((function(e){addParent(e,n)})):a&&"object"===_typeof(a)&&addParent(a,n)}return r&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}var tagMap={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function getTagName(e){var t=tagMap[e.tagName]?tagMap[e.tagName]:e.tagName;return"link"===t&&e.attributes._cssText&&(t="style"),t}function escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var HOVER_SELECTOR=/([^\\]):hover/,HOVER_SELECTOR_GLOBAL=new RegExp(HOVER_SELECTOR.source,"g"),EventType,IncrementalSource,MouseInteractions,CanvasContext,MediaInteractions,ReplayerEvents;function addHoverClass(e,t){var r=null==t?void 0:t.stylesWithHoverClass.get(e);if(r)return r;var n=parse(e,{silent:!0});if(!n.stylesheet)return e;var o=[];if(n.stylesheet.rules.forEach((function(e){"selectors"in e&&(e.selectors||[]).forEach((function(e){HOVER_SELECTOR.test(e)&&o.push(e)}))})),0===o.length)return e;var i=new RegExp(o.filter((function(e,t){return o.indexOf(e)===t})).sort((function(e,t){return t.length-e.length})).map((function(e){return escapeRegExp(e)})).join("|"),"g"),a=e.replace(i,(function(e){var t=e.replace(HOVER_SELECTOR_GLOBAL,"$1.\\:hover");return e+", "+t}));return null==t||t.stylesWithHoverClass.set(e,a),a}function createCache(){return{stylesWithHoverClass:new Map}}function buildNode(e,t){var r=t.doc,n=t.hackCss,o=t.cache;switch(e.type){case NodeType.Document:return r.implementation.createDocument(null,"",null);case NodeType.DocumentType:return r.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case NodeType.Element:var i,a=getTagName(e);i=e.isSVG?r.createElementNS("http://www.w3.org/2000/svg",a):r.createElement(a);var s=function(t){if(!e.attributes.hasOwnProperty(t))return"continue";var s=e.attributes[t];if("option"===a&&"selected"===t&&!1===s)return"continue";if(s="boolean"==typeof s||"number"==typeof s?"":s,t.startsWith("rr_")){if("canvas"===a&&"rr_dataURL"===t){var l=document.createElement("img");l.src=s,l.onload=function(){var e=i.getContext("2d");e&&e.drawImage(l,0,0,l.width,l.height)}}else if("img"===a&&"rr_dataURL"===t){var u=i;u.currentSrc.startsWith("data:")||(u.setAttribute("rrweb-original-src",e.attributes.src),u.src=s)}if("rr_width"===t)i.style.width=s;else if("rr_height"===t)i.style.height=s;else if("rr_mediaCurrentTime"===t)i.currentTime=e.attributes.rr_mediaCurrentTime;else if("rr_mediaState"===t)switch(s){case"played":i.play().catch((function(e){return console.warn("media playback error",e)}));break;case"paused":i.pause()}}else{var c="textarea"===a&&"value"===t,f="style"===a&&"_cssText"===t;if(f&&n&&(s=addHoverClass(s,o)),c||f){for(var p=r.createTextNode(s),d=0,h=Array.from(i.childNodes);d<h.length;d++){var m=h[d];m.nodeType===i.TEXT_NODE&&i.removeChild(m)}return i.appendChild(p),"continue"}try{if(e.isSVG&&"xlink:href"===t)i.setAttributeNS("http://www.w3.org/1999/xlink",t,s);else if("onload"===t||"onclick"===t||"onmouse"===t.substring(0,7))i.setAttribute("_"+t,s);else{if("meta"===a&&"Content-Security-Policy"===e.attributes["http-equiv"]&&"content"===t)return i.setAttribute("csp-content",s),"continue";"link"===a&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===a&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")||("img"===a&&e.attributes.srcset&&e.attributes.rr_dataURL?i.setAttribute("rrweb-original-srcset",e.attributes.srcset):i.setAttribute(t,s))}}catch(e){}}};for(var l in e.attributes)s(l);if(e.isShadowHost)if(i.shadowRoot)for(;i.shadowRoot.firstChild;)i.shadowRoot.removeChild(i.shadowRoot.firstChild);else i.attachShadow({mode:"open"});return i;case NodeType.Text:return r.createTextNode(e.isStyle&&n?addHoverClass(e.textContent,o):e.textContent);case NodeType.CDATA:return r.createCDATASection(e.textContent);case NodeType.Comment:return r.createComment(e.textContent);default:return null}}function buildNodeWithSN(e,t){var r=t.doc,n=t.map,o=t.skipChild,i=void 0!==o&&o,a=t.hackCss,s=void 0===a||a,l=t.afterAppend,u=t.cache,c=buildNode(e,{doc:r,hackCss:s,cache:u});if(!c)return null;if(e.rootId&&console.assert(n[e.rootId]===r,"Target document should has the same root id."),e.type===NodeType.Document&&(r.close(),r.open(),"BackCompat"===e.compatMode&&e.childNodes&&e.childNodes[0].type!==NodeType.DocumentType&&(e.childNodes[0].type===NodeType.Element&&"xmlns"in e.childNodes[0].attributes&&"http://www.w3.org/1999/xhtml"===e.childNodes[0].attributes.xmlns?r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),c=r),c.__sn=e,n[e.id]=c,(e.type===NodeType.Document||e.type===NodeType.Element)&&!i)for(var f=0,p=e.childNodes;f<p.length;f++){var d=p[f],h=buildNodeWithSN(d,{doc:r,map:n,skipChild:!1,hackCss:s,afterAppend:l,cache:u});h?(d.isShadow&&isElement(c)&&c.shadowRoot?c.shadowRoot.appendChild(h):c.appendChild(h),l&&l(h)):console.warn("Failed to rebuild",d)}return c}function visit(e,t){for(var r in e)e[r]&&(n=e[r],t(n));var n}function handleScroll(e){var t=e.__sn;if(t.type===NodeType.Element){var r=e;for(var n in t.attributes)if(t.attributes.hasOwnProperty(n)&&n.startsWith("rr_")){var o=t.attributes[n];"rr_scrollLeft"===n&&(r.scrollLeft=o),"rr_scrollTop"===n&&(r.scrollTop=o)}}}function rebuild(e,t){var r=t.doc,n=t.onVisit,o=t.hackCss,i={},a=buildNodeWithSN(e,{doc:r,map:i,skipChild:!1,hackCss:void 0===o||o,afterAppend:t.afterAppend,cache:t.cache});return visit(i,(function(e){n&&n(e),handleScroll(e)})),[a,i]}function on(e,t,r){void 0===r&&(r=document);var n={capture:!0,passive:!0};return r.addEventListener(e,t,n),function(){return r.removeEventListener(e,t,n)}}function createMirror(){return{map:{},getId:function(e){return e&&e.__sn?e.__sn.id:-1},getNode:function(e){return this.map[e]||null},removeNodeFromMap:function(e){var t=this,r=e.__sn&&e.__sn.id;delete this.map[r],e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},has:function(e){return this.map.hasOwnProperty(e)},reset:function(){this.map={}}}}!function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin"}(EventType||(EventType={})),function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration"}(IncrementalSource||(IncrementalSource={})),function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel"}(MouseInteractions||(MouseInteractions={})),function(e){e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2"}(CanvasContext||(CanvasContext={})),function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange"}(MediaInteractions||(MediaInteractions={})),function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back"}(ReplayerEvents||(ReplayerEvents={}));var DEPARTED_MIRROR_ACCESS_WARNING="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",_mirror={map:{},getId:function(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),-1},getNode:function(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),null},removeNodeFromMap:function(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)},has:function(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),!1},reset:function(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)}};function throttle(e,t,r){void 0===r&&(r={});var n=null,o=0;return function(i){var a=Date.now();o||!1!==r.leading||(o=a);var s=t-(a-o),l=this,u=arguments;s<=0||s>t?(n&&(clearTimeout(n),n=null),o=a,e.apply(l,u)):n||!1===r.trailing||(n=setTimeout((function(){o=!1===r.leading?0:Date.now(),n=null,e.apply(l,u)}),s))}}function hookSetter(e,t,r,n,o){void 0===o&&(o=window);var i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?r:{set:function(e){var t=this;setTimeout((function(){r.set.call(t,e)}),0),i&&i.set&&i.set.call(this,e)}}),function(){return hookSetter(e,t,i||{},!0)}}function patch(e,t,r){try{if(!(t in e))return function(){};var n=e[t],o=r(n);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,function(){e[t]=n}}catch(e){return function(){}}}function getWindowHeight(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function getWindowWidth(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function isBlocked(e,t){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){var r=!1;if("string"==typeof t){if(void 0!==e.closest)return null!==e.closest("."+t);r=e.classList.contains(t)}else e.classList.forEach((function(e){t.test(e)&&(r=!0)}));return r||isBlocked(e.parentNode,t)}return e.nodeType,e.TEXT_NODE,isBlocked(e.parentNode,t)}function isIgnored(e){return"__sn"in e&&e.__sn.id===IGNORED_NODE}function isAncestorRemoved(e,t){if(isShadowRoot(e))return!1;var r=t.getId(e);return!t.has(r)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||isAncestorRemoved(e.parentNode,t))}function isTouchEvent(e){return Boolean(e.changedTouches)}function polyfill$1(e){void 0===e&&(e=window),"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(e){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1})}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(_mirror=new Proxy(_mirror,{get:function(e,t,r){return"map"===t&&console.error(DEPARTED_MIRROR_ACCESS_WARNING),Reflect.get(e,t,r)}}));var TreeIndex=function(){function e(){this.reset()}return e.prototype.add=function(e){var t=this.indexes.get(e.parentId),r={id:e.node.id,mutation:e,children:[],texts:[],attributes:[]};t?(r.parent=t,t.children[r.id]=r):this.tree[r.id]=r,this.indexes.set(r.id,r)},e.prototype.remove=function(e,t){var r=this,n=this.indexes.get(e.parentId),o=this.indexes.get(e.id),i=function t(n){r.removeIdSet.add(n.id),Object.values(n.children).forEach((function(e){return t(e)}));var o=r.indexes.get(n.id);if(o){var i=o.parent;i&&(delete o.parent,delete i.children[o.id],r.indexes.delete(e.id))}};o?n?(delete o.parent,delete n.children[o.id],this.indexes.delete(e.id),i(o)):(delete this.tree[o.id],this.indexes.delete(o.id),i(o)):(this.removeNodeMutations.push(e),function e(n){r.removeIdSet.add(n);var o=t.getNode(n);null==o||o.childNodes.forEach((function(t){"__sn"in t&&e(t.__sn.id)}))}(e.id))},e.prototype.text=function(e){var t=this.indexes.get(e.id);t?t.texts.push(e):this.textMutations.push(e)},e.prototype.attribute=function(e){var t=this.indexes.get(e.id);t?t.attributes.push(e):this.attributeMutations.push(e)},e.prototype.scroll=function(e){this.scrollMap.set(e.id,e)},e.prototype.input=function(e){this.inputMap.set(e.id,e)},e.prototype.flush=function(){var e,t,r,n,o=this,i=this,a=i.tree,s=i.removeNodeMutations,l=i.textMutations,u=i.attributeMutations,c={source:IncrementalSource.Mutation,removes:s,texts:l,attributes:u,adds:[]},f=function e(t,r){r&&o.removeIdSet.add(t.id),c.texts=c.texts.concat(r?[]:t.texts).filter((function(e){return!o.removeIdSet.has(e.id)})),c.attributes=c.attributes.concat(r?[]:t.attributes).filter((function(e){return!o.removeIdSet.has(e.id)})),o.removeIdSet.has(t.id)||o.removeIdSet.has(t.mutation.parentId)||r?Object.values(t.children).forEach((function(t){return e(t,!0)})):(c.adds.push(t.mutation),t.children&&Object.values(t.children).forEach((function(t){return e(t,!1)})))};Object.values(a).forEach((function(e){return f(e,!1)}));try{for(var p=__values(this.scrollMap.keys()),d=p.next();!d.done;d=p.next()){var h=d.value;this.removeIdSet.has(h)&&this.scrollMap.delete(h)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}try{for(var m=__values(this.inputMap.keys()),v=m.next();!v.done;v=m.next()){h=v.value;this.removeIdSet.has(h)&&this.inputMap.delete(h)}}catch(e){r={error:e}}finally{try{v&&!v.done&&(n=m.return)&&n.call(m)}finally{if(r)throw r.error}}var y=new Map(this.scrollMap),g=new Map(this.inputMap);return this.reset(),{mutationData:c,scrollMap:y,inputMap:g}},e.prototype.reset=function(){this.tree=[],this.indexes=new Map,this.removeNodeMutations=[],this.textMutations=[],this.attributeMutations=[],this.removeIdSet=new Set,this.scrollMap=new Map,this.inputMap=new Map},e.prototype.idRemoved=function(e){return this.removeIdSet.has(e)},e}();function queueToResolveTrees(e){var t,r,n={},o=function(e,t){var r={value:e,parent:t,children:[]};return n[e.node.id]=r,r},i=[];try{for(var a=__values(e),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.nextId,c=l.parentId;if(u&&u in n){var f=n[u];if(f.parent){var p=f.parent.children.indexOf(f);f.parent.children.splice(p,0,o(l,f.parent))}else{p=i.indexOf(f);i.splice(p,0,o(l,null))}}else if(c in n){var d=n[c];d.children.push(o(l,d))}else i.push(o(l,null))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}function iterateResolveTree(e,t){t(e.value);for(var r=e.children.length-1;r>=0;r--)iterateResolveTree(e.children[r],t)}function isIframeINode(e){return"__sn"in e&&(e.__sn.type===NodeType.Element&&"iframe"===e.__sn.tagName)}function getBaseDimension(e,t){var r,n,o=null===(n=null===(r=e.ownerDocument)||void 0===r?void 0:r.defaultView)||void 0===n?void 0:n.frameElement;if(!o||o===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};var i=o.getBoundingClientRect(),a=getBaseDimension(o,t),s=i.height/o.clientHeight;return{x:i.x*a.relativeScale+a.x,y:i.y*a.relativeScale+a.y,relativeScale:s,absoluteScale:a.absoluteScale*s}}function hasShadowRoot(e){return Boolean(null==e?void 0:e.shadowRoot)}function isNodeInLinkedList(e){return"__ln"in e}var DoubleLinkedList=function(){function e(){this.length=0,this.head=null}return e.prototype.get=function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var t=this.head,r=0;r<e;r++)t=(null==t?void 0:t.next)||null;return t},e.prototype.addNode=function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&isNodeInLinkedList(e.previousSibling)){var r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else if(e.nextSibling&&isNodeInLinkedList(e.nextSibling)&&e.nextSibling.__ln.previous){r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++},e.prototype.removeNode=function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)},e}(),moveKey=function(e,t){return"".concat(e,"@").concat(t)};function isINode(e){return"__sn"in e}var MutationBuffer=function(){function e(){var e=this;this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(t){t.forEach(e.processMutation),e.emit()},this.emit=function(){var t,r,n,o;if(!e.frozen&&!e.locked){for(var i=[],a=new DoubleLinkedList,s=function(t){for(var r=t,n=IGNORED_NODE;n===IGNORED_NODE;)n=(r=r&&r.nextSibling)&&e.mirror.getId(r);return n},l=function(t){for(var r,n,o,l,u,c=t.getRootNode?null===(r=t.getRootNode())||void 0===r?void 0:r.host:null,f=c;null===(o=null===(n=null==f?void 0:f.getRootNode)||void 0===n?void 0:n.call(f))||void 0===o?void 0:o.host;)f=(null===(u=null===(l=null==f?void 0:f.getRootNode)||void 0===l?void 0:l.call(f))||void 0===u?void 0:u.host)||null;var p=!(e.doc.contains(t)||null!==f&&e.doc.contains(f));if(t.parentNode&&!p){var d=isShadowRoot(t.parentNode)?e.mirror.getId(c):e.mirror.getId(t.parentNode),h=s(t);if(-1===d||-1===h)return a.addNode(t);var m=serializeNodeWithId(t,{doc:e.doc,map:e.mirror.map,blockClass:e.blockClass,blockSelector:e.blockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,skipChild:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,maskInputFn:e.maskInputFn,slimDOMOptions:e.slimDOMOptions,recordCanvas:e.recordCanvas,inlineImages:e.inlineImages,onSerialize:function(r){isIframeINode(r)&&e.iframeManager.addIframe(r),hasShadowRoot(t)&&e.shadowDomManager.addShadowRoot(t.shadowRoot,document)},onIframeLoad:function(t,r){e.iframeManager.attachIframe(t,r),e.shadowDomManager.observeAttachShadow(t)}});m&&i.push({parentId:d,nextId:h,node:m})}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());try{for(var u=__values(e.movedSet),c=u.next();!c.done;c=u.next()){var f=c.value;isParentRemoved(e.removes,f,e.mirror)&&!e.movedSet.has(f.parentNode)||l(f)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}try{for(var p=__values(e.addedSet),d=p.next();!d.done;d=p.next()){f=d.value;isAncestorInSet(e.droppedSet,f)||isParentRemoved(e.removes,f,e.mirror)?isAncestorInSet(e.movedSet,f)?l(f):e.droppedSet.add(f):l(f)}}catch(e){n={error:e}}finally{try{d&&!d.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}for(var h=null;a.length;){var m=null;if(h){var v=e.mirror.getId(h.value.parentNode),y=s(h.value);-1!==v&&-1!==y&&(m=h)}if(!m)for(var g=a.length-1;g>=0;g--){var b=a.get(g);if(b){v=e.mirror.getId(b.value.parentNode),y=s(b.value);if(-1!==v&&-1!==y){m=b;break}}}if(!m){for(;a.head;)a.removeNode(a.head.value);break}h=m.previous,a.removeNode(m.value),l(m.value)}var _={texts:e.texts.map((function(t){return{id:e.mirror.getId(t.node),value:t.value}})).filter((function(t){return e.mirror.has(t.id)})),attributes:e.attributes.map((function(t){return{id:e.mirror.getId(t.node),attributes:t.attributes}})).filter((function(t){return e.mirror.has(t.id)})),removes:e.removes,adds:i};(_.texts.length||_.attributes.length||_.removes.length||_.adds.length)&&(e.texts=[],e.attributes=[],e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.mutationCb(_))}},this.processMutation=function(t){var r,n,o,i;if(!isIgnored(t.target))switch(t.type){case"characterData":var a=t.target.textContent;isBlocked(t.target,e.blockClass)||a===t.oldValue||e.texts.push({value:needMaskingText(t.target,e.maskTextClass,e.maskTextSelector)&&a?e.maskTextFn?e.maskTextFn(a):a.replace(/[\S]/g,"*"):a,node:t.target});break;case"attributes":var s=t.target;a=t.target.getAttribute(t.attributeName);if("value"===t.attributeName&&(a=maskInputValue({maskInputOptions:e.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:a,maskInputFn:e.maskInputFn})),isBlocked(t.target,e.blockClass)||a===t.oldValue)return;var l=e.attributes.find((function(e){return e.node===t.target}));if(l||(l={node:t.target,attributes:{}},e.attributes.push(l)),"style"===t.attributeName){var u=e.doc.createElement("span");t.oldValue&&u.setAttribute("style",t.oldValue),void 0!==l.attributes.style&&null!==l.attributes.style||(l.attributes.style={});var c=l.attributes.style;try{for(var f=__values(Array.from(s.style)),p=f.next();!p.done;p=f.next()){var d=p.value,h=s.style.getPropertyValue(d),m=s.style.getPropertyPriority(d);h===u.style.getPropertyValue(d)&&m===u.style.getPropertyPriority(d)||(c[d]=""===m?h:[h,m])}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}try{for(var v=__values(Array.from(u.style)),y=v.next();!y.done;y=v.next()){d=y.value;""===s.style.getPropertyValue(d)&&(c[d]=!1)}}catch(e){o={error:e}}finally{try{y&&!y.done&&(i=v.return)&&i.call(v)}finally{if(o)throw o.error}}}else l.attributes[t.attributeName]=transformAttribute(e.doc,t.target.tagName,t.attributeName,a);break;case"childList":t.addedNodes.forEach((function(r){return e.genAdds(r,t.target)})),t.removedNodes.forEach((function(r){var n=e.mirror.getId(r),o=isShadowRoot(t.target)?e.mirror.getId(t.target.host):e.mirror.getId(t.target);isBlocked(t.target,e.blockClass)||isIgnored(r)||(e.addedSet.has(r)?(deepDelete(e.addedSet,r),e.droppedSet.add(r)):e.addedSet.has(t.target)&&-1===n||isAncestorRemoved(t.target,e.mirror)||(e.movedSet.has(r)&&e.movedMap[moveKey(n,o)]?deepDelete(e.movedSet,r):e.removes.push({parentId:o,id:n,isShadow:!!isShadowRoot(t.target)||void 0})),e.mapRemoves.push(r))}))}},this.genAdds=function(t,r){if(!r||!isBlocked(r,e.blockClass)){if(isINode(t)){if(isIgnored(t))return;e.movedSet.add(t);var n=null;r&&isINode(r)&&(n=r.__sn.id),n&&(e.movedMap[moveKey(t.__sn.id,n)]=!0)}else e.addedSet.add(t),e.droppedSet.delete(t);isBlocked(t,e.blockClass)||t.childNodes.forEach((function(t){return e.genAdds(t)}))}}}return e.prototype.init=function(e){var t=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","shadowDomManager","canvasManager"].forEach((function(r){t[r]=e[r]}))},e.prototype.freeze=function(){this.frozen=!0,this.canvasManager.freeze()},e.prototype.unfreeze=function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()},e.prototype.isFrozen=function(){return this.frozen},e.prototype.lock=function(){this.locked=!0,this.canvasManager.lock()},e.prototype.unlock=function(){this.locked=!1,this.canvasManager.unlock(),this.emit()},e.prototype.reset=function(){this.shadowDomManager.reset(),this.canvasManager.reset()},e}();function deepDelete(e,t){e.delete(t),t.childNodes.forEach((function(t){return deepDelete(e,t)}))}function isParentRemoved(e,t,r){var n=t.parentNode;if(!n)return!1;var o=r.getId(n);return!!e.some((function(e){return e.id===o}))||isParentRemoved(e,n,r)}function isAncestorInSet(e,t){var r=t.parentNode;return!!r&&(!!e.has(r)||isAncestorInSet(e,r))}var mutationBuffers=[],isCSSGroupingRuleSupported="undefined"!=typeof CSSGroupingRule,isCSSMediaRuleSupported="undefined"!=typeof CSSMediaRule,isCSSSupportsRuleSupported="undefined"!=typeof CSSSupportsRule,isCSSConditionRuleSupported="undefined"!=typeof CSSConditionRule;function getEventTarget(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch(t){return e.target}}function initMutationObserver(e,t){var r,n,o=new MutationBuffer;mutationBuffers.push(o),o.init(e);var i=window.MutationObserver||window.__rrMutationObserver,a=null===(n=null===(r=null===window||void 0===window?void 0:window.Zone)||void 0===r?void 0:r.__symbol__)||void 0===n?void 0:n.call(r,"MutationObserver");a&&window[a]&&(i=window[a]);var s=new i(o.processMutations.bind(o));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function initMoveObserver(e){var t=e.mousemoveCb,r=e.sampling,n=e.doc,o=e.mirror;if(!1===r.mousemove)return function(){};var i,a="number"==typeof r.mousemove?r.mousemove:50,s="number"==typeof r.mousemoveCallback?r.mousemoveCallback:500,l=[],u=throttle((function(e){var r=Date.now()-i;t(l.map((function(e){return e.timeOffset-=r,e})),e),l=[],i=null}),s),c=throttle((function(e){var t=getEventTarget(e),r=isTouchEvent(e)?e.changedTouches[0]:e,n=r.clientX,a=r.clientY;i||(i=Date.now()),l.push({x:n,y:a,id:o.getId(t),timeOffset:Date.now()-i}),u("undefined"!=typeof DragEvent&&e instanceof DragEvent?IncrementalSource.Drag:e instanceof MouseEvent?IncrementalSource.MouseMove:IncrementalSource.TouchMove)}),a,{trailing:!1}),f=[on("mousemove",c,n),on("touchmove",c,n),on("drag",c,n)];return function(){f.forEach((function(e){return e()}))}}function initMouseInteractionObserver(e){var t=e.mouseInteractionCb,r=e.doc,n=e.mirror,o=e.blockClass,i=e.sampling;if(!1===i.mouseInteraction)return function(){};var a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,s=[];return Object.keys(MouseInteractions).filter((function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e]})).forEach((function(e){var i=e.toLowerCase(),a=function(e){return function(r){var i=getEventTarget(r);if(!isBlocked(i,o)){var a=isTouchEvent(r)?r.changedTouches[0]:r;if(a){var s=n.getId(i),l=a.clientX,u=a.clientY;t({type:MouseInteractions[e],id:s,x:l,y:u})}}}}(e);s.push(on(i,a,r))})),function(){s.forEach((function(e){return e()}))}}function initScrollObserver(e){var t=e.scrollCb,r=e.doc,n=e.mirror,o=e.blockClass;return on("scroll",throttle((function(e){var i=getEventTarget(e);if(i&&!isBlocked(i,o)){var a=n.getId(i);if(i===r){var s=r.scrollingElement||r.documentElement;t({id:a,x:s.scrollLeft,y:s.scrollTop})}else t({id:a,x:i.scrollLeft,y:i.scrollTop})}}),e.sampling.scroll||100),r)}function initViewportResizeObserver(e){var t=e.viewportResizeCb,r=-1,n=-1;return on("resize",throttle((function(){var e=getWindowHeight(),o=getWindowWidth();r===e&&n===o||(t({width:Number(o),height:Number(e)}),r=e,n=o)}),200),window)}function wrapEventWithUserTriggeredFlag(e,t){var r=_assign({},e);return t||delete r.userTriggered,r}var INPUT_TAGS=["INPUT","TEXTAREA","SELECT"],lastInputValueMap=new WeakMap;function initInputObserver(e){var t=e.inputCb,r=e.doc,n=e.mirror,o=e.blockClass,i=e.ignoreClass,a=e.maskInputOptions,s=e.maskInputFn,l=e.sampling,u=e.userTriggeredOnInput;function c(e){var t=getEventTarget(e),n=e.isTrusted;if(t&&"OPTION"===t.tagName&&(t=t.parentElement),t&&t.tagName&&!(INPUT_TAGS.indexOf(t.tagName)<0)&&!isBlocked(t,o)){var l=t.type;if(!t.classList.contains(i)){var c=t.value,p=!1;"radio"===l||"checkbox"===l?p=t.checked:(a[t.tagName.toLowerCase()]||a[l])&&(c=maskInputValue({maskInputOptions:a,tagName:t.tagName,type:l,value:c,maskInputFn:s})),f(t,wrapEventWithUserTriggeredFlag({text:c,isChecked:p,userTriggered:n},u));var d=t.name;"radio"===l&&d&&p&&r.querySelectorAll('input[type="radio"][name="'.concat(d,'"]')).forEach((function(e){e!==t&&f(e,wrapEventWithUserTriggeredFlag({text:e.value,isChecked:!p,userTriggered:!1},u))}))}}}function f(e,r){var o=lastInputValueMap.get(e);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){lastInputValueMap.set(e,r);var i=n.getId(e);t(_assign(_assign({},r),{id:i}))}}var p=("last"===l.input?["change"]:["input","change"]).map((function(e){return on(e,c,r)})),d=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),h=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return d&&d.set&&p.push.apply(p,__spreadArray$1([],__read$1(h.map((function(e){return hookSetter(e[0],e[1],{set:function(){c({target:this})}})}))),!1)),function(){p.forEach((function(e){return e()}))}}function getNestedCSSRulePositions(e){return function(e,t){if(isCSSGroupingRuleSupported&&e.parentRule instanceof CSSGroupingRule||isCSSMediaRuleSupported&&e.parentRule instanceof CSSMediaRule||isCSSSupportsRuleSupported&&e.parentRule instanceof CSSSupportsRule||isCSSConditionRuleSupported&&e.parentRule instanceof CSSConditionRule){var r=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(r)}else{r=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(r)}return t}(e,[])}function initStyleSheetObserver(e,t){var r=e.styleSheetRuleCb,n=e.mirror,o=t.win,i=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=function(e,t){var o=n.getId(this.ownerNode);return-1!==o&&r({id:o,adds:[{rule:e,index:t}]}),i.apply(this,arguments)};var a=o.CSSStyleSheet.prototype.deleteRule;o.CSSStyleSheet.prototype.deleteRule=function(e){var t=n.getId(this.ownerNode);return-1!==t&&r({id:t,removes:[{index:e}]}),a.apply(this,arguments)};var s={};isCSSGroupingRuleSupported?s.CSSGroupingRule=o.CSSGroupingRule:(isCSSMediaRuleSupported&&(s.CSSMediaRule=o.CSSMediaRule),isCSSConditionRuleSupported&&(s.CSSConditionRule=o.CSSConditionRule),isCSSSupportsRuleSupported&&(s.CSSSupportsRule=o.CSSSupportsRule));var l={};return Object.entries(s).forEach((function(e){var t=__read$1(e,2),o=t[0],i=t[1];l[o]={insertRule:i.prototype.insertRule,deleteRule:i.prototype.deleteRule},i.prototype.insertRule=function(e,t){var i=n.getId(this.parentStyleSheet.ownerNode);return-1!==i&&r({id:i,adds:[{rule:e,index:__spreadArray$1(__spreadArray$1([],__read$1(getNestedCSSRulePositions(this)),!1),[t||0],!1)}]}),l[o].insertRule.apply(this,arguments)},i.prototype.deleteRule=function(e){var t=n.getId(this.parentStyleSheet.ownerNode);return-1!==t&&r({id:t,removes:[{index:__spreadArray$1(__spreadArray$1([],__read$1(getNestedCSSRulePositions(this)),!1),[e],!1)}]}),l[o].deleteRule.apply(this,arguments)}})),function(){o.CSSStyleSheet.prototype.insertRule=i,o.CSSStyleSheet.prototype.deleteRule=a,Object.entries(s).forEach((function(e){var t=__read$1(e,2),r=t[0],n=t[1];n.prototype.insertRule=l[r].insertRule,n.prototype.deleteRule=l[r].deleteRule}))}}function initStyleDeclarationObserver(e,t){var r=e.styleDeclarationCb,n=e.mirror,o=t.win,i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(e,t,o){var a,s,l=n.getId(null===(s=null===(a=this.parentRule)||void 0===a?void 0:a.parentStyleSheet)||void 0===s?void 0:s.ownerNode);return-1!==l&&r({id:l,set:{property:e,value:t,priority:o},index:getNestedCSSRulePositions(this.parentRule)}),i.apply(this,arguments)};var a=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(e){var t,o,i=n.getId(null===(o=null===(t=this.parentRule)||void 0===t?void 0:t.parentStyleSheet)||void 0===o?void 0:o.ownerNode);return-1!==i&&r({id:i,remove:{property:e},index:getNestedCSSRulePositions(this.parentRule)}),a.apply(this,arguments)},function(){o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=a}}function initMediaInteractionObserver(e){var t=e.mediaInteractionCb,r=e.blockClass,n=e.mirror,o=e.sampling,i=function(e){return throttle((function(o){var i=getEventTarget(o);if(i&&!isBlocked(i,r)){var a=i,s=a.currentTime,l=a.volume,u=a.muted;t({type:e,id:n.getId(i),currentTime:s,volume:l,muted:u})}}),o.media||500)},a=[on("play",i(0)),on("pause",i(1)),on("seeked",i(2)),on("volumechange",i(3))];return function(){a.forEach((function(e){return e()}))}}function initFontObserver(e){var t=e.fontCb,r=e.doc,n=r.defaultView;if(!n)return function(){};var o=[],i=new WeakMap,a=n.FontFace;n.FontFace=function(e,t,r){var n=new a(e,t,r);return i.set(n,{family:e,buffer:"string"!=typeof t,descriptors:r,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),n};var s=patch(r.fonts,"add",(function(e){return function(r){return setTimeout((function(){var e=i.get(r);e&&(t(e),i.delete(r))}),0),e.apply(this,[r])}}));return o.push((function(){n.FontFace=a})),o.push(s),function(){o.forEach((function(e){return e()}))}}function mergeHooks(e,t){var r=e.mutationCb,n=e.mousemoveCb,o=e.mouseInteractionCb,i=e.scrollCb,a=e.viewportResizeCb,s=e.inputCb,l=e.mediaInteractionCb,u=e.styleSheetRuleCb,c=e.styleDeclarationCb,f=e.canvasMutationCb,p=e.fontCb;e.mutationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mutation&&t.mutation.apply(t,__spreadArray$1([],__read$1(e),!1)),r.apply(void 0,__spreadArray$1([],__read$1(e),!1))},e.mousemoveCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.mousemove&&t.mousemove.apply(t,__spreadArray$1([],__read$1(e),!1)),n.apply(void 0,__spreadArray$1([],__read$1(e),!1))},e.mouseInteractionCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.mouseInteraction&&t.mouseInteraction.apply(t,__spreadArray$1([],__read$1(e),!1)),o.apply(void 0,__spreadArray$1([],__read$1(e),!1))},e.scrollCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.scroll&&t.scroll.apply(t,__spreadArray$1([],__read$1(e),!1)),i.apply(void 0,__spreadArray$1([],__read$1(e),!1))},e.viewportResizeCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.viewportResize&&t.viewportResize.apply(t,__spreadArray$1([],__read$1(e),!1)),a.apply(void 0,__spreadArray$1([],__read$1(e),!1))},e.inputCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.input&&t.input.apply(t,__spreadArray$1([],__read$1(e),!1)),s.apply(void 0,__spreadArray$1([],__read$1(e),!1))},e.mediaInteractionCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.mediaInteaction&&t.mediaInteaction.apply(t,__spreadArray$1([],__read$1(e),!1)),l.apply(void 0,__spreadArray$1([],__read$1(e),!1))},e.styleSheetRuleCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.styleSheetRule&&t.styleSheetRule.apply(t,__spreadArray$1([],__read$1(e),!1)),u.apply(void 0,__spreadArray$1([],__read$1(e),!1))},e.styleDeclarationCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.styleDeclaration&&t.styleDeclaration.apply(t,__spreadArray$1([],__read$1(e),!1)),c.apply(void 0,__spreadArray$1([],__read$1(e),!1))},e.canvasMutationCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.canvasMutation&&t.canvasMutation.apply(t,__spreadArray$1([],__read$1(e),!1)),f.apply(void 0,__spreadArray$1([],__read$1(e),!1))},e.fontCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.font&&t.font.apply(t,__spreadArray$1([],__read$1(e),!1)),p.apply(void 0,__spreadArray$1([],__read$1(e),!1))}}function initObservers(e,t){var r,n;void 0===t&&(t={});var o=e.doc.defaultView;if(!o)return function(){};mergeHooks(e,t);var i=initMutationObserver(e,e.doc),a=initMoveObserver(e),s=initMouseInteractionObserver(e),l=initScrollObserver(e),u=initViewportResizeObserver(e),c=initInputObserver(e),f=initMediaInteractionObserver(e),p=initStyleSheetObserver(e,{win:o}),d=initStyleDeclarationObserver(e,{win:o}),h=e.collectFonts?initFontObserver(e):function(){},m=[];try{for(var v=__values(e.plugins),y=v.next();!y.done;y=v.next()){var g=y.value;m.push(g.observer(g.callback,o,g.options))}}catch(e){r={error:e}}finally{try{y&&!y.done&&(n=v.return)&&n.call(v)}finally{if(r)throw r.error}}return function(){mutationBuffers.forEach((function(e){return e.reset()})),i.disconnect(),a(),s(),l(),u(),c(),f(),p(),d(),h(),m.forEach((function(e){return e()}))}}var IframeManager=function(){function e(e){this.iframes=new WeakMap,this.mutationCb=e.mutationCb}return e.prototype.addIframe=function(e){this.iframes.set(e,!0)},e.prototype.addLoadListener=function(e){this.loadListener=e},e.prototype.attachIframe=function(e,t){var r;this.mutationCb({adds:[{parentId:e.__sn.id,nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(r=this.loadListener)||void 0===r||r.call(this,e)},e}(),ShadowDomManager=function(){function e(e){this.restorePatches=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror;var t=this;this.restorePatches.push(patch(HTMLElement.prototype,"attachShadow",(function(e){return function(){var r=e.apply(this,arguments);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,this.ownerDocument),r}})))}return e.prototype.addShadowRoot=function(e,t){initMutationObserver(_assign(_assign({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e),initScrollObserver(_assign(_assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))},e.prototype.observeAttachShadow=function(e){if(e.contentWindow){var t=this;this.restorePatches.push(patch(e.contentWindow.HTMLElement.prototype,"attachShadow",(function(r){return function(){var n=r.apply(this,arguments);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,e.contentDocument),n}})))}},e.prototype.reset=function(){this.restorePatches.forEach((function(e){return e()}))},e}();function initCanvas2DMutationObserver(e,t,r,n){var o,i,a=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype),l=function(n){try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[n])return"continue";var o=patch(t.CanvasRenderingContext2D.prototype,n,(function(t){return function(){for(var o=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return isBlocked(this.canvas,r)||setTimeout((function(){var t=__spreadArray$1([],__read$1(i),!1);if("drawImage"===n&&t[0]&&t[0]instanceof HTMLCanvasElement){var r=t[0],a=r.getContext("2d"),s=null==a?void 0:a.getImageData(0,0,r.width,r.height),l=null==s?void 0:s.data;t[0]=JSON.stringify(l)}e(o.canvas,{type:CanvasContext["2D"],property:n,args:t})}),0),t.apply(this,i)}}));a.push(o)}catch(r){var i=hookSetter(t.CanvasRenderingContext2D.prototype,n,{set:function(t){e(this.canvas,{type:CanvasContext["2D"],property:n,args:[t],setter:!0})}});a.push(i)}};try{for(var u=__values(s),c=u.next();!c.done;c=u.next()){l(c.value)}}catch(e){o={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return function(){a.forEach((function(e){return e()}))}}function initCanvasContextObserver(e,t){var r=[];try{var n=patch(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return isBlocked(this,t)||"__context"in this||(this.__context=r),e.apply(this,__spreadArray$1([r],__read$1(n),!1))}}));r.push(n)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){r.forEach((function(e){return e()}))}}for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i$3=0;i$3<chars.length;i$3++)lookup[chars.charCodeAt(i$3)]=i$3;var encode=function(e){var t,r=new Uint8Array(e),n=r.length,o="";for(t=0;t<n;t+=3)o+=chars[r[t]>>2],o+=chars[(3&r[t])<<4|r[t+1]>>4],o+=chars[(15&r[t+1])<<2|r[t+2]>>6],o+=chars[63&r[t+2]];return n%3==2?o=o.substring(0,o.length-1)+"=":n%3==1&&(o=o.substring(0,o.length-2)+"=="),o},decode=function(e){var t,r,n,o,i,a=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(t=0;t<s;t+=4)r=lookup[e.charCodeAt(t)],n=lookup[e.charCodeAt(t+1)],o=lookup[e.charCodeAt(t+2)],i=lookup[e.charCodeAt(t+3)],c[l++]=r<<2|n>>4,c[l++]=(15&n)<<4|o>>2,c[l++]=(3&o)<<6|63&i;return u},webGLVarMap$1=new Map;function variableListFor$1(e,t){var r=webGLVarMap$1.get(e);return r||(r=new Map,webGLVarMap$1.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}var saveWebGLVar=function(e,t,r){if(e&&(isInstanceOfWebGLObject(e,t)||"object"===_typeof(e))){var n=variableListFor$1(r,e.constructor.name),o=n.indexOf(e);return-1===o&&(o=n.length,n.push(e)),o}};function serializeArg(e,t,r){return e instanceof Array?e.map((function(e){return serializeArg(e,t,r)})):null===e?e:e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray?{rr_type:e.constructor.name,args:[Object.values(e)]}:e instanceof ArrayBuffer?{rr_type:e.constructor.name,base64:encode(e)}:e instanceof DataView?{rr_type:e.constructor.name,args:[serializeArg(e.buffer,t,r),e.byteOffset,e.byteLength]}:e instanceof HTMLImageElement?{rr_type:e.constructor.name,src:e.src}:e instanceof ImageData?{rr_type:e.constructor.name,args:[serializeArg(e.data,t,r),e.width,e.height]}:isInstanceOfWebGLObject(e,t)||"object"===_typeof(e)?{rr_type:e.constructor.name,index:saveWebGLVar(e,t,r)}:e}var serializeArgs=function(e,t,r){return __spreadArray$1([],__read$1(e),!1).map((function(e){return serializeArg(e,t,r)}))},isInstanceOfWebGLObject=function(e,t){var r=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((function(e){return"function"==typeof t[e]}));return Boolean(r.find((function(r){return e instanceof t[r]})))};function patchGLPrototype(e,t,r,n,o,i){var a,s,l=[],u=Object.getOwnPropertyNames(e),c=function(a){try{if("function"!=typeof e[a])return"continue";var s=patch(e,a,(function(s){return function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];var c=s.apply(this,l);if(saveWebGLVar(c,i,e),!isBlocked(this.canvas,n)){o.getId(this.canvas);var f=serializeArgs(__spreadArray$1([],__read$1(l),!1),i,e),p={type:t,property:a,args:f};r(this.canvas,p)}return c}}));l.push(s)}catch(n){var u=hookSetter(e,a,{set:function(e){r(this.canvas,{type:t,property:a,args:[e],setter:!0})}});l.push(u)}};try{for(var f=__values(u),p=f.next();!p.done;p=f.next()){c(p.value)}}catch(e){a={error:e}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}return l}function initCanvasWebGLMutationObserver(e,t,r,n){var o=[];return o.push.apply(o,__spreadArray$1([],__read$1(patchGLPrototype(t.WebGLRenderingContext.prototype,CanvasContext.WebGL,e,r,n,t)),!1)),void 0!==t.WebGL2RenderingContext&&o.push.apply(o,__spreadArray$1([],__read$1(patchGLPrototype(t.WebGL2RenderingContext.prototype,CanvasContext.WebGL2,e,r,n,t)),!1)),function(){o.forEach((function(e){return e()}))}}var CanvasManager=function(){function e(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=function(e,t){!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)},this.mutationCb=e.mutationCb,this.mirror=e.mirror,!0===e.recordCanvas&&this.initCanvasMutationObserver(e.win,e.blockClass)}return e.prototype.reset=function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()},e.prototype.freeze=function(){this.frozen=!0},e.prototype.unfreeze=function(){this.frozen=!1},e.prototype.lock=function(){this.locked=!0},e.prototype.unlock=function(){this.locked=!1},e.prototype.initCanvasMutationObserver=function(e,t){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var r=initCanvasContextObserver(e,t),n=initCanvas2DMutationObserver(this.processMutation.bind(this),e,t,this.mirror),o=initCanvasWebGLMutationObserver(this.processMutation.bind(this),e,t,this.mirror);this.resetObservers=function(){r(),n(),o()}},e.prototype.startPendingCanvasMutationFlusher=function(){var e=this;requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))},e.prototype.startRAFTimestamping=function(){var e=this;requestAnimationFrame((function t(r){e.rafStamps.latestId=r,requestAnimationFrame(t)}))},e.prototype.flushPendingCanvasMutations=function(){var e=this;this.pendingCanvasMutations.forEach((function(t,r){var n=e.mirror.getId(r);e.flushPendingCanvasMutationFor(r,n)})),requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))},e.prototype.flushPendingCanvasMutationFor=function(e,t){if(!this.frozen&&!this.locked){var r=this.pendingCanvasMutations.get(e);if(r&&-1!==t){var n=r.map((function(e){return e.type,__rest(e,["type"])})),o=r[0].type;this.mutationCb({id:t,type:o,commands:n}),this.pendingCanvasMutations.delete(e)}}},e}(),wrappedEmit,takeFullSnapshot;function wrapEvent(e){return _assign(_assign({},e),{timestamp:Date.now()})}var mirror=createMirror();function record(e){void 0===e&&(e={});var t=e.emit,r=e.checkoutEveryNms,n=e.checkoutEveryNth,o=e.blockClass,i=void 0===o?"rr-block":o,a=e.blockSelector,s=void 0===a?null:a,l=e.ignoreClass,u=void 0===l?"rr-ignore":l,c=e.maskTextClass,f=void 0===c?"rr-mask":c,p=e.maskTextSelector,d=void 0===p?null:p,h=e.inlineStylesheet,m=void 0===h||h,v=e.maskAllInputs,y=e.maskInputOptions,g=e.slimDOMOptions,b=e.maskInputFn,_=e.maskTextFn,S=e.hooks,E=e.packFn,w=e.sampling,T=void 0===w?{}:w,R=e.mousemoveWait,I=e.recordCanvas,A=void 0!==I&&I,N=e.userTriggeredOnInput,C=void 0!==N&&N,x=e.collectFonts,O=void 0!==x&&x,M=e.inlineImages,L=void 0!==M&&M,k=e.plugins,D=e.keepIframeSrcFn,P=void 0===D?function(){return!1}:D;if(!t)throw new Error("emit function is required");void 0!==R&&void 0===T.mousemove&&(T.mousemove=R);var $,B=!0===v?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==y?y:{password:!0},F=!0===g||"all"===g?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===g,headMetaDescKeywords:"all"===g}:g||{};polyfill$1();var V=0;wrappedEmit=function(e,o){var i;if(!(null===(i=mutationBuffers[0])||void 0===i?void 0:i.isFrozen())||e.type===EventType.FullSnapshot||e.type===EventType.IncrementalSnapshot&&e.data.source===IncrementalSource.Mutation||mutationBuffers.forEach((function(e){return e.unfreeze()})),t(function(e){var t,r;try{for(var n=__values(k||[]),o=n.next();!o.done;o=n.next()){var i=o.value;i.eventProcessor&&(e=i.eventProcessor(e))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return E&&(e=E(e)),e}(e),o),e.type===EventType.FullSnapshot)$=e,V=0;else if(e.type===EventType.IncrementalSnapshot){if(e.data.source===IncrementalSource.Mutation&&e.data.isAttachIframe)return;V++;var a=n&&V>=n,s=r&&e.timestamp-$.timestamp>r;(a||s)&&takeFullSnapshot(!0)}};var W=function(e){wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:_assign({source:IncrementalSource.Mutation},e)}))},U=function(e){return wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:_assign({source:IncrementalSource.Scroll},e)}))},G=function(e){return wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:_assign({source:IncrementalSource.CanvasMutation},e)}))},j=new IframeManager({mutationCb:W}),z=new CanvasManager({recordCanvas:A,mutationCb:G,win:window,blockClass:i,mirror:mirror}),H=new ShadowDomManager({mutationCb:W,scrollCb:U,bypassOptions:{blockClass:i,blockSelector:s,maskTextClass:f,maskTextSelector:d,inlineStylesheet:m,maskInputOptions:B,maskTextFn:_,maskInputFn:b,recordCanvas:A,inlineImages:L,sampling:T,slimDOMOptions:F,iframeManager:j,canvasManager:z},mirror:mirror});takeFullSnapshot=function(e){var t,r,n,o;void 0===e&&(e=!1),wrappedEmit(wrapEvent({type:EventType.Meta,data:{href:window.location.href,width:getWindowWidth(),height:getWindowHeight()}}),e),mutationBuffers.forEach((function(e){return e.lock()}));var a=__read$1(snapshot(document,{blockClass:i,blockSelector:s,maskTextClass:f,maskTextSelector:d,inlineStylesheet:m,maskAllInputs:B,maskTextFn:_,slimDOM:F,recordCanvas:A,inlineImages:L,onSerialize:function(e){isIframeINode(e)&&j.addIframe(e),hasShadowRoot(e)&&H.addShadowRoot(e.shadowRoot,document)},onIframeLoad:function(e,t){j.attachIframe(e,t),H.observeAttachShadow(e)},keepIframeSrcFn:P}),2),l=a[0],u=a[1];if(!l)return console.warn("Failed to snapshot the document");mirror.map=u,wrappedEmit(wrapEvent({type:EventType.FullSnapshot,data:{node:l,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(r=null===(t=null===document||void 0===document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===r?void 0:r.scrollLeft)||(null===document||void 0===document?void 0:document.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(o=null===(n=null===document||void 0===document?void 0:document.body)||void 0===n?void 0:n.parentElement)||void 0===o?void 0:o.scrollTop)||(null===document||void 0===document?void 0:document.body.scrollTop)||0}}})),mutationBuffers.forEach((function(e){return e.unlock()}))};try{var Y=[];Y.push(on("DOMContentLoaded",(function(){wrappedEmit(wrapEvent({type:EventType.DomContentLoaded,data:{}}))})));var q=function(e){var t;return initObservers({mutationCb:W,mousemoveCb:function(e,t){return wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(e){return wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:_assign({source:IncrementalSource.MouseInteraction},e)}))},scrollCb:U,viewportResizeCb:function(e){return wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:_assign({source:IncrementalSource.ViewportResize},e)}))},inputCb:function(e){return wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:_assign({source:IncrementalSource.Input},e)}))},mediaInteractionCb:function(e){return wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:_assign({source:IncrementalSource.MediaInteraction},e)}))},styleSheetRuleCb:function(e){return wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:_assign({source:IncrementalSource.StyleSheetRule},e)}))},styleDeclarationCb:function(e){return wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:_assign({source:IncrementalSource.StyleDeclaration},e)}))},canvasMutationCb:G,fontCb:function(e){return wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:_assign({source:IncrementalSource.Font},e)}))},blockClass:i,ignoreClass:u,maskTextClass:f,maskTextSelector:d,maskInputOptions:B,inlineStylesheet:m,sampling:T,recordCanvas:A,inlineImages:L,userTriggeredOnInput:C,collectFonts:O,doc:e,maskInputFn:b,maskTextFn:_,blockSelector:s,slimDOMOptions:F,mirror:mirror,iframeManager:j,shadowDomManager:H,canvasManager:z,plugins:(null===(t=null==k?void 0:k.filter((function(e){return e.observer})))||void 0===t?void 0:t.map((function(e){return{observer:e.observer,options:e.options,callback:function(t){return wrappedEmit(wrapEvent({type:EventType.Plugin,data:{plugin:e.name,payload:t}}))}}})))||[]},S)};j.addLoadListener((function(e){Y.push(q(e.contentDocument))}));var K=function(){takeFullSnapshot(),Y.push(q(document))};return"interactive"===document.readyState||"complete"===document.readyState?K():Y.push(on("load",(function(){wrappedEmit(wrapEvent({type:EventType.Load,data:{}})),K()}),window)),function(){Y.forEach((function(e){return e()}))}}catch(e){console.warn(e)}}function mitt$1(e){return e=e||Object.create(null),{on:function(t,r){(e[t]||(e[t]=[])).push(r)},off:function(t,r){e[t]&&e[t].splice(e[t].indexOf(r)>>>0,1)},emit:function(t,r){(e[t]||[]).slice().map((function(e){e(r)})),(e["*"]||[]).slice().map((function(e){e(t,r)}))}}}record.addCustomEvent=function(e,t){if(!wrappedEmit)throw new Error("please add custom event after start recording");wrappedEmit(wrapEvent({type:EventType.Custom,data:{tag:e,payload:t}}))},record.freezePage=function(){mutationBuffers.forEach((function(e){return e.freeze()}))},record.takeFullSnapshot=function(e){if(!takeFullSnapshot)throw new Error("please take full snapshot after start recording");takeFullSnapshot(e)},record.mirror=mirror;var mitt_es=Object.freeze({__proto__:null,default:mitt$1});function polyfill(e,t){if(void 0===e&&(e=window),void 0===t&&(t=document),!("scrollBehavior"in t.documentElement.style)||!0===e.__forceSmoothScrollPolyfill__){var r,n=e.HTMLElement||e.Element,o={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:n.prototype.scroll||s,scrollIntoView:n.prototype.scrollIntoView},i=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now,a=(r=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(r)?1:0);e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?h.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):o.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!==_typeof(arguments[0])?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?o.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!==_typeof(arguments[0])?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):h.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},n.prototype.scroll=n.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==l(arguments[0])){var e=arguments[0].left,t=arguments[0].top;h.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===t?this.scrollTop:~~t)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!==_typeof(arguments[0])?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},n.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},n.prototype.scrollIntoView=function(){if(!0!==l(arguments[0])){var r=p(this),n=r.getBoundingClientRect(),i=this.getBoundingClientRect();r!==t.body?(h.call(this,r,r.scrollLeft+i.left-n.left,r.scrollTop+i.top-n.top),"fixed"!==e.getComputedStyle(r).position&&e.scrollBy({left:n.left,top:n.top,behavior:"smooth"})):e.scrollBy({left:i.left,top:i.top,behavior:"smooth"})}else o.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function s(e,t){this.scrollLeft=e,this.scrollTop=t}function l(e){if(null===e||"object"!==_typeof(e)||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"===_typeof(e)&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function u(e,t){return"Y"===t?e.clientHeight+a<e.scrollHeight:"X"===t?e.clientWidth+a<e.scrollWidth:void 0}function c(t,r){var n=e.getComputedStyle(t,null)["overflow"+r];return"auto"===n||"scroll"===n}function f(e){var t=u(e,"Y")&&c(e,"Y"),r=u(e,"X")&&c(e,"X");return t||r}function p(e){for(;e!==t.body&&!1===f(e);)e=e.parentNode||e.host;return e}function d(t){var r,n,o,a,s=(i()-t.startTime)/468;a=s=s>1?1:s,r=.5*(1-Math.cos(Math.PI*a)),n=t.startX+(t.x-t.startX)*r,o=t.startY+(t.y-t.startY)*r,t.method.call(t.scrollable,n,o),n===t.x&&o===t.y||e.requestAnimationFrame(d.bind(e,t))}function h(r,n,a){var l,u,c,f,p=i();r===t.body?(l=e,u=e.scrollX||e.pageXOffset,c=e.scrollY||e.pageYOffset,f=o.scroll):(l=r,u=r.scrollLeft,c=r.scrollTop,f=s),d({scrollable:l,method:f,startTime:p,startX:u,startY:c,x:n,y:a})}}var Timer=function(){function e(e,t){void 0===e&&(e=[]),this.timeOffset=0,this.raf=null,this.actions=e,this.speed=t}return e.prototype.addAction=function(e){var t=this.findActionIndex(e);this.actions.splice(t,0,e)},e.prototype.addActions=function(e){this.actions=this.actions.concat(e)},e.prototype.start=function(){this.timeOffset=0;var e=performance.now(),t=this.actions,r=this;this.raf=requestAnimationFrame((function n(){var o=performance.now();for(r.timeOffset+=(o-e)*r.speed,e=o;t.length;){var i=t[0];if(!(r.timeOffset>=i.delay))break;t.shift(),i.doAction()}(t.length>0||r.liveMode)&&(r.raf=requestAnimationFrame(n))}))},e.prototype.clear=function(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0},e.prototype.setSpeed=function(e){this.speed=e},e.prototype.toggleLiveMode=function(e){this.liveMode=e},e.prototype.isActive=function(){return null!==this.raf},e.prototype.findActionIndex=function(e){for(var t=0,r=this.actions.length-1;t<=r;){var n=Math.floor((t+r)/2);if(this.actions[n].delay<e.delay)t=n+1;else{if(!(this.actions[n].delay>e.delay))return n+1;r=n-1}}return t},e}(),n;function addDelay(e,t){if(e.type===EventType.IncrementalSnapshot&&e.data.source===IncrementalSource.MouseMove){var r=e.data.positions[0].timeOffset,n=e.timestamp+r;return e.delay=n-t,n-t}return e.delay=e.timestamp-t,e.delay}function t(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(n||(n={}));var e={type:"xstate.init"};function r(e){return void 0===e?[]:[].concat(e)}function o(e){return{type:"xstate.assign",assignment:e}}function i$2(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function a(e){return function(t){return e===t}}function u(e){return"string"==typeof e?{type:e}:e}function c(e,t){return{value:e,context:t,actions:[],changed:!1,matches:a(e)}}function f(e,t,r){var n=t,o=!1;return[e.filter((function(e){if("xstate.assign"===e.type){o=!0;var t=Object.assign({},n);return"function"==typeof e.assignment?t=e.assignment(n,r):Object.keys(e.assignment).forEach((function(o){t[o]="function"==typeof e.assignment[o]?e.assignment[o](n,r):e.assignment[o]})),n=t,!1}return!0})),n,o]}function s(n,o){void 0===o&&(o={});var i=t(f(r(n.states[n.initial].entry).map((function(e){return i$2(e,o.actions)})),n.context,e),2),s=i[0],l=i[1],p={config:n,_options:o,initialState:{value:n.initial,actions:s,context:l,matches:a(n.initial)},transition:function(e,o){var i,s,l="string"==typeof e?{value:e,context:n.context}:e,d=l.value,h=l.context,m=u(o),v=n.states[d];if(v.on){var y=r(v.on[m.type]);try{for(var g=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(y),b=g.next();!b.done;b=g.next()){var _=b.value;if(void 0===_)return c(d,h);var S="string"==typeof _?{target:_}:_,E=S.target,w=S.actions,T=void 0===w?[]:w,R=S.cond,I=void 0===R?function(){return!0}:R,A=void 0===E,N=null!=E?E:d,C=n.states[N];if(I(h,m)){var x=t(f((A?r(T):[].concat(v.exit,T,C.entry).filter((function(e){return e}))).map((function(e){return i$2(e,p._options.actions)})),h,m),3),O=x[0],M=x[1],L=x[2],k=null!=E?E:d;return{value:k,context:M,actions:O,changed:E!==d||O.length>0||L,matches:a(k)}}}}catch(e){i={error:e}}finally{try{b&&!b.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}}return c(d,h)}};return p}var l=function(e,t){return e.actions.forEach((function(r){var n=r.exec;return n&&n(e.context,t)}))};function v(t){var r=t.initialState,o=n.NotStarted,i=new Set,s={_machine:t,send:function(e){o===n.Running&&(r=t.transition(r,e),l(r,u(e)),i.forEach((function(e){return e(r)})))},subscribe:function(e){return i.add(e),e(r),{unsubscribe:function(){return i.delete(e)}}},start:function(i){if(i){var u="object"==_typeof(i)?i:{context:t.config.context,value:i};r={value:u.value,actions:[],context:u.context,matches:a(u.value)}}return o=n.Running,l(r,e),s},stop:function(){return o=n.Stopped,i.clear(),s},get state(){return r},get status(){return o}};return s}function discardPriorSnapshots(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.type===EventType.Meta&&n.timestamp<=t)return e.slice(r)}return e}function createPlayerService(e,t){var r=t.getCastFn,n=t.applyEventsSynchronously,i=t.emitter,a=s({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:o({lastPlayedEvent:function(e,t){return"CAST_EVENT"===t.type?t.payload.event:e.lastPlayedEvent}}),recordTimeOffset:o((function(e,t){var r=e.timeOffset;return"payload"in t&&"timeOffset"in t.payload&&(r=t.payload.timeOffset),_assign(_assign({},e),{timeOffset:r,baselineTime:e.events[0].timestamp+r})})),play:function(e){var t,o,a,s,l,u=e.timer,c=e.events,f=e.baselineTime,p=e.lastPlayedEvent;u.clear();try{for(var d=__values(c),h=d.next();!h.done;h=d.next()){addDelay(h.value,f)}}catch(e){t={error:e}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(t)throw t.error}}var m=discardPriorSnapshots(c,f),v=null==p?void 0:p.timestamp;(null==p?void 0:p.type)===EventType.IncrementalSnapshot&&p.data.source===IncrementalSource.MouseMove&&(v=p.timestamp+(null===(l=p.data.positions[0])||void 0===l?void 0:l.timeOffset)),f<(v||0)&&i.emit(ReplayerEvents.PlayBack);var y=new Array,g=new Array,b=function(e){if(v&&v<f&&(e.timestamp<=v||e===p))return"continue";if(e.timestamp<f)y.push(e);else{var t=r(e,!1);g.push({doAction:function(){t()},delay:e.delay})}};try{for(var _=__values(m),S=_.next();!S.done;S=_.next()){b(S.value)}}catch(e){a={error:e}}finally{try{S&&!S.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}n(y),i.emit(ReplayerEvents.Flush),u.addActions(g),u.start()},pause:function(e){e.timer.clear()},resetLastPlayedEvent:o((function(e){return _assign(_assign({},e),{lastPlayedEvent:null})})),startLive:o({baselineTime:function(e,t){return e.timer.toggleLiveMode(!0),e.timer.start(),"TO_LIVE"===t.type&&t.payload.baselineTime?t.payload.baselineTime:Date.now()}}),addEvent:o((function(e,t){var n=e.baselineTime,o=e.timer,i=e.events;if("ADD_EVENT"===t.type){var a=t.payload.event;addDelay(a,n);var s=i.length-1;if(!i[s]||i[s].timestamp<=a.timestamp)i.push(a);else{for(var l=-1,u=0;u<=s;){var c=Math.floor((u+s)/2);i[c].timestamp<=a.timestamp?u=c+1:s=c-1}-1===l&&(l=u),i.splice(l,0,a)}var f=a.timestamp<n,p=r(a,f);f?p():o.isActive()&&o.addAction({doAction:function(){p()},delay:a.delay})}return _assign(_assign({},e),{events:i})}))}});return v(a)}function createSpeedService(e){return v(s({id:"speed",context:e,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:function(e,t){"payload"in t&&e.timer.setSpeed(t.payload.speed)},recordSpeed:o({normalSpeed:function(e){return e.timer.speed}}),restoreSpeed:function(e){e.timer.setSpeed(e.normalSpeed)}}}))}var rules=function(e){return[".".concat(e," { background: currentColor }"),"noscript { display: none !important; }"]},StyleRuleType;function getNestedRule(e,t){var r=e[t[0]];return 1===t.length?r:getNestedRule(r.cssRules[t[1]].cssRules,t.slice(2))}function getPositionsAndIndex(e){var t=__spreadArray$1([],__read$1(e),!1),r=t.pop();return{positions:t,index:r}}function applyVirtualStyleRulesToNode(e,t){var r=t.sheet;r&&e.forEach((function(e){if(e.type===StyleRuleType.Insert)try{if(Array.isArray(e.index)){var n=getPositionsAndIndex(e.index),o=n.positions,i=n.index;getNestedRule(r.cssRules,o).insertRule(e.cssText,i)}else r.insertRule(e.cssText,e.index)}catch(e){}else if(e.type===StyleRuleType.Remove)try{if(Array.isArray(e.index)){var a=getPositionsAndIndex(e.index);o=a.positions,i=a.index;getNestedRule(r.cssRules,o).deleteRule(i||0)}else r.deleteRule(e.index)}catch(e){}else if(e.type===StyleRuleType.Snapshot)restoreSnapshotOfStyleRulesToNode(e.cssTexts,t);else if(e.type===StyleRuleType.SetProperty){getNestedRule(r.cssRules,e.index).style.setProperty(e.property,e.value,e.priority)}else if(e.type===StyleRuleType.RemoveProperty){getNestedRule(r.cssRules,e.index).style.removeProperty(e.property)}}))}function restoreSnapshotOfStyleRulesToNode(e,t){var r;try{var n=Array.from((null===(r=t.sheet)||void 0===r?void 0:r.cssRules)||[]).map((function(e){return e.cssText})),o=Object.entries(n).reverse(),i=n.length;o.forEach((function(r){var n,o=__read$1(r,2),a=o[0],s=o[1],l=e.indexOf(s);if(-1===l||l>i)try{null===(n=t.sheet)||void 0===n||n.deleteRule(Number(a))}catch(e){}i=l})),e.forEach((function(e,r){var n,o,i;try{(null===(o=null===(n=t.sheet)||void 0===n?void 0:n.cssRules[r])||void 0===o?void 0:o.cssText)!==e&&(null===(i=t.sheet)||void 0===i||i.insertRule(e,r))}catch(e){}}))}catch(e){}}function storeCSSRules(e,t){var r;try{var n=Array.from((null===(r=e.sheet)||void 0===r?void 0:r.cssRules)||[]).map((function(e){return e.cssText}));t.set(e,[{type:StyleRuleType.Snapshot,cssTexts:n}])}catch(e){}}!function(e){e[e.Insert=0]="Insert",e[e.Remove=1]="Remove",e[e.Snapshot=2]="Snapshot",e[e.SetProperty=3]="SetProperty",e[e.RemoveProperty=4]="RemoveProperty"}(StyleRuleType||(StyleRuleType={}));var webGLVarMap=new Map;function variableListFor(e,t){var r=webGLVarMap.get(e);return r||(r=new Map,webGLVarMap.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}function getContext(e,t){try{return t===CanvasContext.WebGL?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}catch(e){return null}}var WebGLVariableConstructorsNames=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function saveToWebGLVarMap(e,t){if(null==t?void 0:t.constructor){var r=t.constructor.name;if(WebGLVariableConstructorsNames.includes(r)){var n=variableListFor(e,r);n.includes(t)||n.push(t)}}}function deserializeArg(e,t){return function(r){if(r&&"object"===_typeof(r)&&"rr_type"in r){if("index"in r){var n=r.rr_type,o=r.index;return variableListFor(t,n)[o]}if("args"in r){var i=r.rr_type,a=r.args,s=window[i];return new(s.bind.apply(s,__spreadArray$1([void 0],__read$1(a.map(deserializeArg(e,t))),!1)))}if("base64"in r)return decode(r.base64);if("src"in r){var l=e.get(r.src);if(l)return l;var u=new Image;return u.src=r.src,e.set(r.src,u),u}}else if(Array.isArray(r))return r.map(deserializeArg(e,t));return r}}function webglMutation(e){var t=e.mutation,r=e.target,n=e.type,o=e.imageMap,i=e.errorHandler;try{var a=getContext(r,n);if(!a)return;if(t.setter)return void(a[t.property]=t.args[0]);var s=a[t.property],l=t.args.map(deserializeArg(o,a));saveToWebGLVarMap(a,s.apply(a,l))}catch(e){i(t,e)}}function canvasMutation$1(e){var t=e.event,r=e.mutation,n=e.target,o=e.imageMap,i=e.errorHandler;try{var a=n.getContext("2d");if(r.setter)return void(a[r.property]=r.args[0]);var s=a[r.property];if("drawImage"===r.property&&"string"==typeof r.args[0]){var l=o.get(t);r.args[0]=l,s.apply(a,r.args)}else s.apply(a,r.args)}catch(e){i(r,e)}}function canvasMutation(e){var t=e.event,r=e.mutation,n=e.target,o=e.imageMap,i=e.errorHandler;try{var a="commands"in r?r.commands:[r];return[CanvasContext.WebGL,CanvasContext.WebGL2].includes(r.type)?a.forEach((function(e){webglMutation({mutation:e,type:r.type,target:n,imageMap:o,errorHandler:i})})):a.forEach((function(e){canvasMutation$1({event:t,mutation:e,target:n,imageMap:o,errorHandler:i})}))}catch(e){i(r,e)}}var SKIP_TIME_THRESHOLD=1e4,SKIP_TIME_INTERVAL=5e3,mitt=mitt$1||mitt_es,REPLAY_CONSOLE_PREFIX="[replayer]",defaultMouseTailConfig={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function indicatesTouchDevice(e){return e.type==EventType.IncrementalSnapshot&&(e.data.source==IncrementalSource.TouchMove||e.data.source==IncrementalSource.MouseInteraction&&e.data.type==MouseInteractions.TouchStart)}!function(){function e(e,t){var r=this;if(this.mouseTail=null,this.tailPositions=[],this.emitter=mitt(),this.legacy_missingNodeRetryMap={},this.cache=createCache(),this.imageMap=new Map,this.mirror=createMirror(),this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,!(null==t?void 0:t.liveMode)&&e.length<2)throw new Error("Replayer need at least 2 events.");var n={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:defaultMouseTailConfig};this.config=Object.assign({},n,t),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(ReplayerEvents.Resize,this.handleResize),this.setupDom(),this.treeIndex=new TreeIndex,this.fragmentParentMap=new Map,this.elementStateMap=new Map,this.virtualStyleRulesMap=new Map,this.emitter.on(ReplayerEvents.Flush,(function(){var e,t,n,o,i,a,s,l,u=r.treeIndex.flush(),c=u.scrollMap,f=u.inputMap,p=u.mutationData;r.fragmentParentMap.forEach((function(e,t){return r.restoreRealParent(t,e)}));try{for(var d=__values(p.texts),h=d.next();!h.done;h=d.next()){var m=h.value;r.applyText(m,p)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}try{for(var v=__values(r.virtualStyleRulesMap.keys()),y=v.next();!y.done;y=v.next()){var g=y.value;r.restoreNodeSheet(g)}}catch(e){n={error:e}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(n)throw n.error}}r.fragmentParentMap.clear(),r.elementStateMap.clear(),r.virtualStyleRulesMap.clear();try{for(var b=__values(c.values()),_=b.next();!_.done;_=b.next()){m=_.value;r.applyScroll(m,!0)}}catch(e){i={error:e}}finally{try{_&&!_.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}try{for(var S=__values(f.values()),E=S.next();!E.done;E=S.next()){m=E.value;r.applyInput(m)}}catch(e){s={error:e}}finally{try{E&&!E.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}})),this.emitter.on(ReplayerEvents.PlayBack,(function(){r.firstFullSnapshot=null,r.mirror.reset()}));var o=new Timer([],(null==t?void 0:t.speed)||n.speed);this.service=createPlayerService({events:e.map((function(e){return t&&t.unpackFn?t.unpackFn(e):e})).sort((function(e,t){return e.timestamp-t.timestamp})),timer:o,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe((function(e){r.emitter.emit(ReplayerEvents.StateChange,{player:e})})),this.speedService=createSpeedService({normalSpeed:-1,timer:o}),this.speedService.start(),this.speedService.subscribe((function(e){r.emitter.emit(ReplayerEvents.StateChange,{speed:e})}));var i=this.service.state.context.events.find((function(e){return e.type===EventType.Meta})),a=this.service.state.context.events.find((function(e){return e.type===EventType.FullSnapshot}));if(i){var s=i.data,l=s.width,u=s.height;setTimeout((function(){r.emitter.emit(ReplayerEvents.Resize,{width:l,height:u})}),0)}a&&setTimeout((function(){r.firstFullSnapshot||(r.firstFullSnapshot=a,r.rebuildFullSnapshot(a),r.iframe.contentWindow.scrollTo(a.data.initialOffset))}),1),this.service.state.context.events.find(indicatesTouchDevice)&&this.mouse.classList.add("touch-device")}Object.defineProperty(e.prototype,"timer",{get:function(){return this.service.state.context.timer},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t){return this.emitter.on(e,t),this},e.prototype.off=function(e,t){return this.emitter.off(e,t),this},e.prototype.setConfig=function(e){var t=this;Object.keys(e).forEach((function(r){t.config[r]=e[r]})),this.config.skipInactive||this.backToNormal(),void 0!==e.speed&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),void 0!==e.mouseTail&&(!1===e.mouseTail?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))},e.prototype.getMetaData=function(){var e=this.service.state.context.events[0],t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}},e.prototype.getCurrentTime=function(){return this.timer.timeOffset+this.getTimeOffset()},e.prototype.getTimeOffset=function(){var e=this.service.state.context;return e.baselineTime-e.events[0].timestamp},e.prototype.getMirror=function(){return this.mirror},e.prototype.play=function(e){var t;void 0===e&&(e=0),this.service.state.matches("paused")||this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}}),null===(t=this.iframe.contentDocument)||void 0===t||t.getElementsByTagName("html")[0].classList.remove("rrweb-paused"),this.emitter.emit(ReplayerEvents.Start)},e.prototype.pause=function(e){var t;void 0===e&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),"number"==typeof e&&(this.play(e),this.service.send({type:"PAUSE"})),null===(t=this.iframe.contentDocument)||void 0===t||t.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(ReplayerEvents.Pause)},e.prototype.resume=function(e){void 0===e&&(e=0),console.warn("The 'resume' will be departed in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(ReplayerEvents.Resume)},e.prototype.startLive=function(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})},e.prototype.addEvent=function(e){var t=this,r=this.config.unpackFn?this.config.unpackFn(e):e;indicatesTouchDevice(r)&&this.mouse.classList.add("touch-device"),Promise.resolve().then((function(){return t.service.send({type:"ADD_EVENT",payload:{event:r}})}))},e.prototype.enableInteract=function(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"},e.prototype.disableInteract=function(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"},e.prototype.resetCache=function(){this.cache=createCache()},e.prototype.setupDom=function(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),!1!==this.config.mouseTail&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");var e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(polyfill(this.iframe.contentWindow,this.iframe.contentDocument),polyfill$1(this.iframe.contentWindow))},e.prototype.handleResize=function(e){var t,r;this.iframe.style.display="inherit";try{for(var n=__values([this.mouseTail,this.iframe]),o=n.next();!o.done;o=n.next()){var i=o.value;i&&(i.setAttribute("width",String(e.width)),i.setAttribute("height",String(e.height)))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.applyEventsSynchronously=function(e){var t,r;try{for(var n=__values(e),o=n.next();!o.done;o=n.next()){var i=o.value;switch(i.type){case EventType.DomContentLoaded:case EventType.Load:case EventType.Custom:continue;case EventType.FullSnapshot:case EventType.Meta:case EventType.Plugin:break;case EventType.IncrementalSnapshot:if(i.data.source===IncrementalSource.MediaInteraction)continue}this.getCastFn(i,!0)()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}this.mousePos&&this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null,!0===this.touchActive?this.mouse.classList.add("touch-active"):!1===this.touchActive&&this.mouse.classList.remove("touch-active"),this.touchActive=null},e.prototype.getCastFn=function(e,t){var r,n=this;switch(void 0===t&&(t=!1),e.type){case EventType.DomContentLoaded:case EventType.Load:break;case EventType.Custom:r=function(){n.emitter.emit(ReplayerEvents.CustomEvent,e)};break;case EventType.Meta:r=function(){return n.emitter.emit(ReplayerEvents.Resize,{width:e.data.width,height:e.data.height})};break;case EventType.FullSnapshot:r=function(){if(n.firstFullSnapshot){if(n.firstFullSnapshot===e)return void(n.firstFullSnapshot=!0)}else n.firstFullSnapshot=!0;n.rebuildFullSnapshot(e,t),n.iframe.contentWindow.scrollTo(e.data.initialOffset)};break;case EventType.IncrementalSnapshot:r=function(){var r,o;if(n.applyIncremental(e,t),!t&&(e===n.nextUserInteractionEvent&&(n.nextUserInteractionEvent=null,n.backToNormal()),n.config.skipInactive&&!n.nextUserInteractionEvent)){try{for(var i=__values(n.service.state.context.events),a=i.next();!a.done;a=i.next()){var s=a.value;if(!(s.timestamp<=e.timestamp)&&n.isUserInteraction(s)){s.delay-e.delay>SKIP_TIME_THRESHOLD*n.speedService.state.context.timer.speed&&(n.nextUserInteractionEvent=s);break}}}catch(e){r={error:e}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}if(n.nextUserInteractionEvent){var l=n.nextUserInteractionEvent.delay-e.delay,u={speed:Math.min(Math.round(l/SKIP_TIME_INTERVAL),n.config.maxSpeed)};n.speedService.send({type:"FAST_FORWARD",payload:u}),n.emitter.emit(ReplayerEvents.SkipStart,u)}}}}return function(){var o,i;r&&r();try{for(var a=__values(n.config.plugins||[]),s=a.next();!s.done;s=a.next()){s.value.handler(e,t,{replayer:n})}}catch(e){o={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}n.service.send({type:"CAST_EVENT",payload:{event:e}});var l=n.service.state.context.events.length-1;if(e===n.service.state.context.events[l]){var u=function(){l<n.service.state.context.events.length-1||(n.backToNormal(),n.service.send("END"),n.emitter.emit(ReplayerEvents.Finish))};e.type===EventType.IncrementalSnapshot&&e.data.source===IncrementalSource.MouseMove&&e.data.positions.length?setTimeout((function(){u()}),Math.max(0,50-e.data.positions[0].timeOffset)):u()}n.emitter.emit(ReplayerEvents.EventCast,e)}},e.prototype.rebuildFullSnapshot=function(e,t){var r,n,o=this;if(void 0===t&&(t=!1),!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&console.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};var i=[];this.mirror.map=rebuild(e.data.node,{doc:this.iframe.contentDocument,afterAppend:function(e){o.collectIframeAndAttachDocument(i,e)},cache:this.cache})[1];var a=function(e,t){s.attachDocumentToIframe(e,t),s.newDocumentQueue=s.newDocumentQueue.filter((function(t){return t!==e}))},s=this;try{for(var l=__values(i),u=l.next();!u.done;u=l.next()){var c=u.value;a(c.mutationInQueue,c.builtNode)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}var f=this.iframe.contentDocument,p=f.documentElement,d=f.head;this.insertStyleRules(p,d),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(ReplayerEvents.FullsnapshotRebuilded,e),t||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()},e.prototype.insertStyleRules=function(e,t){var r=document.createElement("style");e.insertBefore(r,t);var n=rules(this.config.blockClass).concat(this.config.insertStyleRules);this.config.pauseAnimation&&n.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }");for(var o=0;o<n.length;o++)r.sheet.insertRule(n[o],o)},e.prototype.attachDocumentToIframe=function(e,t){var r,n,o=this,i=[];if(!t.contentDocument)for(var a=t.parentNode;a;){if(this.fragmentParentMap.has(a)){var s=a,l=this.fragmentParentMap.get(s);this.restoreRealParent(s,l);break}a=a.parentNode}buildNodeWithSN(e.node,{doc:t.contentDocument,map:this.mirror.map,hackCss:!0,skipChild:!1,afterAppend:function(e){if(o.collectIframeAndAttachDocument(i,e),e.__sn.type===NodeType.Element&&"HTML"===e.__sn.tagName.toUpperCase()){var r=t.contentDocument,n=r.documentElement,a=r.head;o.insertStyleRules(n,a)}},cache:this.cache});var u=function(e,t){c.attachDocumentToIframe(e,t),c.newDocumentQueue=c.newDocumentQueue.filter((function(t){return t!==e}))},c=this;try{for(var f=__values(i),p=f.next();!p.done;p=f.next()){var d=p.value;u(d.mutationInQueue,d.builtNode)}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}},e.prototype.collectIframeAndAttachDocument=function(e,t){if(isIframeINode(t)){var r=this.newDocumentQueue.find((function(e){return e.parentId===t.__sn.id}));r&&e.push({mutationInQueue:r,builtNode:t})}},e.prototype.waitForStylesheetLoad=function(){var e,t=this,r=null===(e=this.iframe.contentDocument)||void 0===e?void 0:e.head;if(r){var n,o=new Set,i=this.service.state,a=function(){i=t.service.state};this.emitter.on(ReplayerEvents.Start,a),this.emitter.on(ReplayerEvents.Pause,a);var s=function(){t.emitter.off(ReplayerEvents.Start,a),t.emitter.off(ReplayerEvents.Pause,a)};r.querySelectorAll('link[rel="stylesheet"]').forEach((function(e){e.sheet||(o.add(e),e.addEventListener("load",(function(){o.delete(e),0===o.size&&-1!==n&&(i.matches("playing")&&t.play(t.getCurrentTime()),t.emitter.emit(ReplayerEvents.LoadStylesheetEnd),n&&clearTimeout(n),s())})))})),o.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(ReplayerEvents.LoadStylesheetStart),n=setTimeout((function(){i.matches("playing")&&t.play(t.getCurrentTime()),n=-1,s()}),this.config.loadTimeout))}},e.prototype.hasImageArg=function(e){var t,r;try{for(var n=__values(e),o=n.next();!o.done;o=n.next()){var i=o.value;if(i&&"object"===_typeof(i))if("rr_type"in i&&"args"in i){if(this.hasImageArg(i.args))return!0}else{if("rr_type"in i&&"HTMLImageElement"===i.rr_type)return!0;if(i instanceof Array&&this.hasImageArg(i))return!0}else;}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return!1},e.prototype.getImageArgs=function(e){var t,r,n=[];try{for(var o=__values(e),i=o.next();!i.done;i=o.next()){var a=i.value;a&&"object"===_typeof(a)&&("rr_type"in a&&"args"in a?n.push.apply(n,__spreadArray$1([],__read$1(this.getImageArgs(a.args)),!1)):"rr_type"in a&&"HTMLImageElement"===a.rr_type?n.push(a.src):a instanceof Array&&n.push.apply(n,__spreadArray$1([],__read$1(this.getImageArgs(a)),!1)))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},e.prototype.preloadAllImages=function(){var e,t,r=this;this.service.state;var n=function(){r.service.state};this.emitter.on(ReplayerEvents.Start,n),this.emitter.on(ReplayerEvents.Pause,n);var o=function(e){e.type===EventType.IncrementalSnapshot&&e.data.source===IncrementalSource.CanvasMutation&&("commands"in e.data?e.data.commands.forEach((function(t){return r.preloadImages(t,e)})):i.preloadImages(e.data,e))},i=this;try{for(var a=__values(this.service.state.context.events),s=a.next();!s.done;s=a.next()){o(s.value)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}},e.prototype.preloadImages=function(e,t){var r=this;if("drawImage"!==e.property||"string"!=typeof e.args[0]||this.imageMap.has(t))this.hasImageArg(e.args)&&this.getImageArgs(e.args).forEach((function(e){var t=new Image;t.src=e,r.imageMap.set(e,t)}));else{var n=document.createElement("canvas"),o=n.getContext("2d"),i=null==o?void 0:o.createImageData(n.width,n.height);null==i||i.data,JSON.parse(e.args[0]),null==o||o.putImageData(i,0,0)}},e.prototype.applyIncremental=function(e,t){var r,n,o=this,i=e.data;switch(i.source){case IncrementalSource.Mutation:t&&(i.adds.forEach((function(e){return o.treeIndex.add(e)})),i.texts.forEach((function(e){var t=o.mirror.getNode(e.id),r=null==t?void 0:t.parentNode;r&&o.virtualStyleRulesMap.has(r)&&o.virtualStyleRulesMap.delete(r),o.treeIndex.text(e)})),i.attributes.forEach((function(e){return o.treeIndex.attribute(e)})),i.removes.forEach((function(e){return o.treeIndex.remove(e,o.mirror)})));try{this.applyMutation(i,t)}catch(e){this.warn("Exception in mutation ".concat(e.message||e),i)}break;case IncrementalSource.Drag:case IncrementalSource.TouchMove:case IncrementalSource.MouseMove:if(t){var a=i.positions[i.positions.length-1];this.mousePos={x:a.x,y:a.y,id:a.id,debugData:i}}else i.positions.forEach((function(r){var n={doAction:function(){o.moveAndHover(r.x,r.y,r.id,t,i)},delay:r.timeOffset+e.timestamp-o.service.state.context.baselineTime};o.timer.addAction(n)})),this.timer.addAction({doAction:function(){},delay:e.delay-(null===(r=i.positions[0])||void 0===r?void 0:r.timeOffset)});break;case IncrementalSource.MouseInteraction:if(-1===i.id)break;var s=new Event(MouseInteractions[i.type].toLowerCase());if(!(g=this.mirror.getNode(i.id)))return this.debugNodeNotFound(i,i.id);this.emitter.emit(ReplayerEvents.MouseInteraction,{type:i.type,target:g});var l=this.config.triggerFocus;switch(i.type){case MouseInteractions.Blur:"blur"in g&&g.blur();break;case MouseInteractions.Focus:l&&g.focus&&g.focus({preventScroll:!0});break;case MouseInteractions.Click:case MouseInteractions.TouchStart:case MouseInteractions.TouchEnd:t?(i.type===MouseInteractions.TouchStart?this.touchActive=!0:i.type===MouseInteractions.TouchEnd&&(this.touchActive=!1),this.mousePos={x:i.x,y:i.y,id:i.id,debugData:i}):(i.type===MouseInteractions.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(i.x,i.y,i.id,t,i),i.type===MouseInteractions.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):i.type===MouseInteractions.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):i.type===MouseInteractions.TouchEnd&&this.mouse.classList.remove("touch-active"));break;case MouseInteractions.TouchCancel:t?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:g.dispatchEvent(s)}break;case IncrementalSource.Scroll:if(-1===i.id)break;if(t){this.treeIndex.scroll(i);break}this.applyScroll(i,!1);break;case IncrementalSource.ViewportResize:this.emitter.emit(ReplayerEvents.Resize,{width:i.width,height:i.height});break;case IncrementalSource.Input:if(-1===i.id)break;if(t){this.treeIndex.input(i);break}this.applyInput(i);break;case IncrementalSource.MediaInteraction:if(!(g=this.mirror.getNode(i.id)))return this.debugNodeNotFound(i,i.id);var u=g;try{i.currentTime&&(u.currentTime=i.currentTime),i.volume&&(u.volume=i.volume),i.muted&&(u.muted=i.muted),1===i.type&&u.pause(),0===i.type&&u.play()}catch(e){this.config.showWarning&&console.warn("Failed to replay media interactions: ".concat(e.message||e))}break;case IncrementalSource.StyleSheetRule:if(!(g=this.mirror.getNode(i.id)))return this.debugNodeNotFound(i,i.id);var c,f=g,p=g.parentNode,d=this.fragmentParentMap.has(p),h=d?null:f.sheet;h||(this.virtualStyleRulesMap.has(g)?c=this.virtualStyleRulesMap.get(g):(c=[],this.virtualStyleRulesMap.set(g,c))),i.adds&&i.adds.forEach((function(e){var t=e.rule,r=e.index;if(h)try{if(Array.isArray(r)){var n=getPositionsAndIndex(r),o=n.positions,i=n.index;getNestedRule(h.cssRules,o).insertRule(t,i)}else{i=void 0===r?void 0:Math.min(r,h.cssRules.length);h.insertRule(t,i)}}catch(e){}else null==c||c.push({cssText:t,index:r,type:StyleRuleType.Insert})})),i.removes&&i.removes.forEach((function(e){var t=e.index;if(d)null==c||c.push({index:t,type:StyleRuleType.Remove});else try{if(Array.isArray(t)){var r=getPositionsAndIndex(t),n=r.positions,o=r.index;getNestedRule(h.cssRules,n).deleteRule(o||0)}else null==h||h.deleteRule(t)}catch(e){}}));break;case IncrementalSource.StyleDeclaration:if(!(g=this.mirror.getNode(i.id)))return this.debugNodeNotFound(i,i.id);f=g;var m=g.parentNode,v=this.fragmentParentMap.has(m)?null:f.sheet,y=[];if(v||(this.virtualStyleRulesMap.has(g)?y=this.virtualStyleRulesMap.get(g):(y=[],this.virtualStyleRulesMap.set(g,y))),i.set)if(v)getNestedRule(v.rules,i.index).style.setProperty(i.set.property,i.set.value,i.set.priority);else y.push(_assign({type:StyleRuleType.SetProperty,index:i.index},i.set));if(i.remove)if(v)getNestedRule(v.rules,i.index).style.removeProperty(i.remove.property);else y.push(_assign({type:StyleRuleType.RemoveProperty,index:i.index},i.remove));break;case IncrementalSource.CanvasMutation:if(!this.config.UNSAFE_replayCanvas)return;var g;if(!(g=this.mirror.getNode(i.id)))return this.debugNodeNotFound(i,i.id);canvasMutation({event:e,mutation:i,target:g,imageMap:this.imageMap,errorHandler:this.warnCanvasMutationFailed.bind(this)});break;case IncrementalSource.Font:try{var b=new FontFace(i.family,i.buffer?new Uint8Array(JSON.parse(i.fontSource)):i.fontSource,i.descriptors);null===(n=this.iframe.contentDocument)||void 0===n||n.fonts.add(b)}catch(e){this.config.showWarning&&console.warn(e)}}},e.prototype.applyMutation=function(e,t){var r,n,o=this;e.removes.forEach((function(t){var r=o.mirror.getNode(t.id);if(!r){if(e.removes.find((function(e){return e.id===t.parentId})))return;return o.warnNodeNotFound(e,t.id)}o.virtualStyleRulesMap.has(r)&&o.virtualStyleRulesMap.delete(r);var n=o.mirror.getNode(t.parentId);if(!n)return o.warnNodeNotFound(e,t.parentId);if(t.isShadow&&hasShadowRoot(n)&&(n=n.shadowRoot),o.mirror.removeNodeFromMap(r),n){var i=null,a="__sn"in n?o.fragmentParentMap.get(n):void 0;a&&a.contains(r)?n=a:o.fragmentParentMap.has(r)&&(i=o.fragmentParentMap.get(r),o.fragmentParentMap.delete(r),r=i);try{n.removeChild(r)}catch(t){if(!(t instanceof DOMException))throw t;o.warn("parent could not remove child in mutation",n,a,r,i,e)}}}));var i=_assign({},this.legacy_missingNodeRetryMap),a=[],s=function(e){var r,n,s,l;if(!o.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");var u=o.mirror.getNode(e.parentId);if(!u)return e.node.type===NodeType.Document?o.newDocumentQueue.push(e):a.push(e);var c=null;o.iframe.contentDocument.contains?c=o.iframe.contentDocument.contains(u):o.iframe.contentDocument.body.contains&&(c=o.iframe.contentDocument.body.contains(u));var f=(null===(l=(s=u).getElementsByTagName)||void 0===l?void 0:l.call(s,"iframe").length)>0;if(t&&c&&!isIframeINode(u)&&!f){var p=document.createDocumentFragment();for(o.mirror.map[e.parentId]=p,o.fragmentParentMap.set(p,u),o.storeState(u);u.firstChild;)p.appendChild(u.firstChild);u=p}e.node.isShadow&&(hasShadowRoot(u)||u.attachShadow({mode:"open"}),u=u.shadowRoot);var d=null,h=null;if(e.previousId&&(d=o.mirror.getNode(e.previousId)),e.nextId&&(h=o.mirror.getNode(e.nextId)),function(e){var t=null;return e.nextId&&(t=o.mirror.getNode(e.nextId)),null!==e.nextId&&void 0!==e.nextId&&-1!==e.nextId&&!t}(e))return a.push(e);if(!e.node.rootId||o.mirror.getNode(e.node.rootId)){var m=e.node.rootId?o.mirror.getNode(e.node.rootId):o.iframe.contentDocument;if(isIframeINode(u))o.attachDocumentToIframe(e,u);else{var v=buildNodeWithSN(e.node,{doc:m,map:o.mirror.map,skipChild:!0,hackCss:!0,cache:o.cache});if(-1!==e.previousId&&-1!==e.nextId){if("__sn"in u&&u.__sn.type===NodeType.Element&&"textarea"===u.__sn.tagName&&e.node.type===NodeType.Text)try{for(var y=__values(Array.from(u.childNodes)),g=y.next();!g.done;g=y.next()){var b=g.value;b.nodeType===u.TEXT_NODE&&u.removeChild(b)}}catch(e){r={error:e}}finally{try{g&&!g.done&&(n=y.return)&&n.call(y)}finally{if(r)throw r.error}}if(d&&d.nextSibling&&d.nextSibling.parentNode)u.insertBefore(v,d.nextSibling);else if(h&&h.parentNode)u.contains(h)?u.insertBefore(v,h):u.insertBefore(v,null);else{if(u===m)for(;m.firstChild;)m.removeChild(m.firstChild);u.appendChild(v)}if(isIframeINode(v)){var _=o.newDocumentQueue.find((function(e){return e.parentId===v.__sn.id}));_&&(o.attachDocumentToIframe(_,v),o.newDocumentQueue=o.newDocumentQueue.filter((function(e){return e!==_})))}(e.previousId||e.nextId)&&o.legacy_resolveMissingNode(i,u,v,e)}else i[e.node.id]={node:v,mutation:e}}}};e.adds.forEach((function(e){s(e)}));for(var l=Date.now();a.length;){var u=queueToResolveTrees(a);if(a.length=0,Date.now()-l>500){this.warn("Timeout in the loop, please check the resolve tree data:",u);break}try{for(var c=(r=void 0,__values(u)),f=c.next();!f.done;f=c.next()){var p=f.value;this.mirror.getNode(p.value.parentId)?iterateResolveTree(p,(function(e){s(e)})):this.debug("Drop resolve tree since there is no parent for the root node.",p)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}Object.keys(i).length&&Object.assign(this.legacy_missingNodeRetryMap,i),e.texts.forEach((function(t){var r=o.mirror.getNode(t.id);if(!r){if(e.removes.find((function(e){return e.id===t.id})))return;return o.warnNodeNotFound(e,t.id)}o.fragmentParentMap.has(r)&&(r=o.fragmentParentMap.get(r)),r.textContent=t.value})),e.attributes.forEach((function(t){var r=o.mirror.getNode(t.id);if(!r){if(e.removes.find((function(e){return e.id===t.id})))return;return o.warnNodeNotFound(e,t.id)}for(var n in o.fragmentParentMap.has(r)&&(r=o.fragmentParentMap.get(r)),t.attributes)if("string"==typeof n){var i=t.attributes[n];if(null===i)r.removeAttribute(n);else if("string"==typeof i)try{r.setAttribute(n,i)}catch(e){o.config.showWarning&&console.warn("An error occurred may due to the checkout feature.",e)}else if("style"===n){var a=i,s=r;for(var l in a)if(!1===a[l])s.style.removeProperty(l);else if(a[l]instanceof Array){var u=a[l];s.style.setProperty(l,u[0],u[1])}else{var c=a[l];s.style.setProperty(l,c)}}}}))},e.prototype.applyScroll=function(e,t){var r=this.mirror.getNode(e.id);if(!r)return this.debugNodeNotFound(e,e.id);if(r===this.iframe.contentDocument)this.iframe.contentWindow.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else if(r.__sn.type===NodeType.Document)r.defaultView.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else try{r.scrollTop=e.y,r.scrollLeft=e.x}catch(e){}},e.prototype.applyInput=function(e){var t=this.mirror.getNode(e.id);if(!t)return this.debugNodeNotFound(e,e.id);try{t.checked=e.isChecked,t.value=e.text}catch(e){}},e.prototype.applyText=function(e,t){var r=this.mirror.getNode(e.id);if(!r)return this.debugNodeNotFound(t,e.id);try{r.textContent=e.value}catch(e){}},e.prototype.legacy_resolveMissingNode=function(e,t,r,n){var o=n.previousId,i=n.nextId,a=o&&e[o],s=i&&e[i];if(a){var l=a,u=l.node,c=l.mutation;t.insertBefore(u,r),delete e[c.node.id],delete this.legacy_missingNodeRetryMap[c.node.id],(c.previousId||c.nextId)&&this.legacy_resolveMissingNode(e,t,u,c)}if(s){var f=s;u=f.node,c=f.mutation;t.insertBefore(u,r.nextSibling),delete e[c.node.id],delete this.legacy_missingNodeRetryMap[c.node.id],(c.previousId||c.nextId)&&this.legacy_resolveMissingNode(e,t,u,c)}},e.prototype.moveAndHover=function(e,t,r,n,o){var i=this.mirror.getNode(r);if(!i)return this.debugNodeNotFound(o,r);var a=getBaseDimension(i,this.iframe),s=e*a.absoluteScale+a.x,l=t*a.absoluteScale+a.y;this.mouse.style.left="".concat(s,"px"),this.mouse.style.top="".concat(l,"px"),n||this.drawMouseTail({x:s,y:l}),this.hoverElements(i)},e.prototype.drawMouseTail=function(e){var t=this;if(this.mouseTail){var r=!0===this.config.mouseTail?defaultMouseTailConfig:Object.assign({},defaultMouseTailConfig,this.config.mouseTail),n=r.lineCap,o=r.lineWidth,i=r.strokeStyle,a=r.duration,s=function(){if(t.mouseTail){var e=t.mouseTail.getContext("2d");e&&t.tailPositions.length&&(e.clearRect(0,0,t.mouseTail.width,t.mouseTail.height),e.beginPath(),e.lineWidth=o,e.lineCap=n,e.strokeStyle=i,e.moveTo(t.tailPositions[0].x,t.tailPositions[0].y),t.tailPositions.forEach((function(t){return e.lineTo(t.x,t.y)})),e.stroke())}};this.tailPositions.push(e),s(),setTimeout((function(){t.tailPositions=t.tailPositions.filter((function(t){return t!==e})),s()}),a/this.speedService.state.context.timer.speed)}},e.prototype.hoverElements=function(e){var t;null===(t=this.iframe.contentDocument)||void 0===t||t.querySelectorAll(".\\:hover").forEach((function(e){e.classList.remove(":hover")}));for(var r=e;r;)r.classList&&r.classList.add(":hover"),r=r.parentElement},e.prototype.isUserInteraction=function(e){return e.type===EventType.IncrementalSnapshot&&(e.data.source>IncrementalSource.Mutation&&e.data.source<=IncrementalSource.Input)},e.prototype.backToNormal=function(){this.nextUserInteractionEvent=null,this.speedService.state.matches("normal")||(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(ReplayerEvents.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))},e.prototype.restoreRealParent=function(e,t){this.mirror.map[t.__sn.id]=t,t.__sn.type===NodeType.Element&&"textarea"===t.__sn.tagName&&e.textContent&&(t.value=e.textContent),t.appendChild(e),this.restoreState(t)},e.prototype.storeState=function(e){var t,r;if(e&&e.nodeType===e.ELEMENT_NODE){var n=e;(n.scrollLeft||n.scrollTop)&&this.elementStateMap.set(e,{scroll:[n.scrollLeft,n.scrollTop]}),"STYLE"===n.tagName&&storeCSSRules(n,this.virtualStyleRulesMap);var o=n.children;try{for(var i=__values(Array.from(o)),a=i.next();!a.done;a=i.next()){var s=a.value;this.storeState(s)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}},e.prototype.restoreState=function(e){var t,r;if(e.nodeType===e.ELEMENT_NODE){var n=e;if(this.elementStateMap.has(e)){var o=this.elementStateMap.get(e);o.scroll&&(n.scrollLeft=o.scroll[0],n.scrollTop=o.scroll[1]),this.elementStateMap.delete(e)}var i=n.children;try{for(var a=__values(Array.from(i)),s=a.next();!s.done;s=a.next()){var l=s.value;this.restoreState(l)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}},e.prototype.restoreNodeSheet=function(e){var t=this.virtualStyleRulesMap.get(e);"STYLE"===e.nodeName&&(t&&applyVirtualStyleRulesToNode(t,e))},e.prototype.warnNodeNotFound=function(e,t){this.treeIndex.idRemoved(t)?this.warn("Node with id '".concat(t,"' was previously removed. "),e):this.warn("Node with id '".concat(t,"' not found. "),e)},e.prototype.warnCanvasMutationFailed=function(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)},e.prototype.debugNodeNotFound=function(e,t){this.treeIndex.idRemoved(t)?this.debug(REPLAY_CONSOLE_PREFIX,"Node with id '".concat(t,"' was previously removed. "),e):this.debug(REPLAY_CONSOLE_PREFIX,"Node with id '".concat(t,"' not found. "),e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.config.showWarning&&console.warn.apply(console,__spreadArray$1([REPLAY_CONSOLE_PREFIX],__read$1(e),!1))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.config.showDebug&&console.log.apply(console,__spreadArray$1([REPLAY_CONSOLE_PREFIX],__read$1(e),!1))}}(),record.addCustomEvent,record.freezePage;var u8$1=Uint8Array,u16$1=Uint16Array,u32$1=Uint32Array,fleb$1=new u8$1([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb$1=new u8$1([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),freb$1=function(e,t){for(var r=new u16$1(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var o=new u32$1(r[30]);for(n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)o[i]=i-r[n]<<5|n;return[r,o]},_a$2=freb$1(fleb$1,2),fl$1=_a$2[0],revfl$1=_a$2[1];fl$1[28]=258,revfl$1[258]=28,freb$1(fdeb$1,0);for(var rev$1=new u16$1(32768),i$1=0;i$1<32768;++i$1){var x$1=(43690&i$1)>>>1|(21845&i$1)<<1;x$1=(52428&x$1)>>>2|(13107&x$1)<<2,x$1=(61680&x$1)>>>4|(3855&x$1)<<4,rev$1[i$1]=((65280&x$1)>>>8|(255&x$1)<<8)>>>1}for(var flt$1=new u8$1(288),i$1=0;i$1<144;++i$1)flt$1[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt$1[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt$1[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt$1[i$1]=8;for(var fdt$1=new u8$1(32),i$1=0;i$1<32;++i$1)fdt$1[i$1]=5;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(e,t){for(var r=new u16(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var o=new u32(r[30]);for(n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)o[i]=i-r[n]<<5|n;return[r,o]},_a$1=freb(fleb,2),fl=_a$1[0],revfl=_a$1[1];fl[28]=258,revfl[258]=28;for(var _b=freb(fdeb,0),revfd=_b[1],rev=new u16(32768),i=0;i<32768;++i){var x=(43690&i)>>>1|(21845&i)<<1;x=(52428&x)>>>2|(13107&x)<<2,x=(61680&x)>>>4|(3855&x)<<4,rev[i]=((65280&x)>>>8|(255&x)<<8)>>>1}for(var hMap=function(e,t,r){for(var n=e.length,o=0,i=new u16(t);o<n;++o)e[o]&&++i[e[o]-1];var a,s=new u16(t);for(o=0;o<t;++o)s[o]=s[o-1]+i[o-1]<<1;if(r){a=new u16(1<<t);var l=15-t;for(o=0;o<n;++o)if(e[o])for(var u=o<<4|e[o],c=t-e[o],f=s[e[o]-1]++<<c,p=f|(1<<c)-1;f<=p;++f)a[rev[f]>>>l]=u}else for(a=new u16(n),o=0;o<n;++o)e[o]&&(a[o]=rev[s[e[o]-1]++]>>>15-e[o]);return a},flt=new u8(288),i=0;i<144;++i)flt[i]=8;for(var i=144;i<256;++i)flt[i]=9;for(var i=256;i<280;++i)flt[i]=7;for(var i=280;i<288;++i)flt[i]=8;for(var fdt=new u8(32),i=0;i<32;++i)fdt[i]=5;var flm=hMap(flt,9,0),fdm=hMap(fdt,5,0),shft=function(e){return(e+7)/8|0},slc=function(e,t,r){(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length);var n=new(2==e.BYTES_PER_ELEMENT?u16:4==e.BYTES_PER_ELEMENT?u32:u8)(r-t);return n.set(e.subarray(t,r)),n},wbits=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8},wbits16=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},hTree=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var o=r.length,i=r.slice();if(!o)return[et,0];if(1==o){var a=new u8(r[0].s+1);return a[r[0].s]=1,[a,1]}r.sort((function(e,t){return e.f-t.f})),r.push({s:-1,f:25001});var s=r[0],l=r[1],u=0,c=1,f=2;for(r[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=o-1;)s=r[r[u].f<r[f].f?u++:f++],l=r[u!=c&&r[u].f<r[f].f?u++:f++],r[c++]={s:-1,f:s.f+l.f,l:s,r:l};var p=i[0].s;for(n=1;n<o;++n)i[n].s>p&&(p=i[n].s);var d=new u16(p+1),h=ln(r[c-1],d,0);if(h>t){n=0;var m=0,v=h-t,y=1<<v;for(i.sort((function(e,t){return d[t.s]-d[e.s]||e.f-t.f}));n<o;++n){var g=i[n].s;if(!(d[g]>t))break;m+=y-(1<<h-d[g]),d[g]=t}for(m>>>=v;m>0;){var b=i[n].s;d[b]<t?m-=1<<t-d[b]++-1:++n}for(;n>=0&&m;--n){var _=i[n].s;d[_]==t&&(--d[_],++m)}h=t}return[new u8(d),h]},ln=function e(t,r,n){return-1==t.s?Math.max(e(t.l,r,n+1),e(t.r,r,n+1)):r[t.s]=n},lc=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new u16(++t),n=0,o=e[0],i=1,a=function(e){r[n++]=e},s=1;s<=t;++s)if(e[s]==o&&s!=t)++i;else{if(!o&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(o),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(o);i=1,o=e[s]}return[r.subarray(0,n),t]},clen=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},wfblk=function(e,t,r){var n=r.length,o=shft(t+2);e[o]=255&n,e[o+1]=n>>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var i=0;i<n;++i)e[o+i+4]=r[i];return 8*(o+4+n)},wblk=function(e,t,r,n,o,i,a,s,l,u,c){wbits(t,c++,r),++o[256];for(var f=hTree(o,15),p=f[0],d=f[1],h=hTree(i,15),m=h[0],v=h[1],y=lc(p),g=y[0],b=y[1],_=lc(m),S=_[0],E=_[1],w=new u16(19),T=0;T<g.length;++T)w[31&g[T]]++;for(T=0;T<S.length;++T)w[31&S[T]]++;for(var R=hTree(w,7),I=R[0],A=R[1],N=19;N>4&&!I[clim[N-1]];--N);var C,x,O,M,L=u+5<<3,k=clen(o,flt)+clen(i,fdt)+a,D=clen(o,p)+clen(i,m)+a+14+3*N+clen(w,I)+(2*w[16]+3*w[17]+7*w[18]);if(L<=k&&L<=D)return wfblk(t,c,e.subarray(l,l+u));if(wbits(t,c,1+(D<k)),c+=2,D<k){C=hMap(p,d,0),x=p,O=hMap(m,v,0),M=m;var P=hMap(I,A,0);wbits(t,c,b-257),wbits(t,c+5,E-1),wbits(t,c+10,N-4),c+=14;for(T=0;T<N;++T)wbits(t,c+3*T,I[clim[T]]);c+=3*N;for(var $=[g,S],B=0;B<2;++B){var F=$[B];for(T=0;T<F.length;++T){var V=31&F[T];wbits(t,c,P[V]),c+=I[V],V>15&&(wbits(t,c,F[T]>>>5&127),c+=F[T]>>>12)}}}else C=flm,x=flt,O=fdm,M=fdt;for(T=0;T<s;++T)if(n[T]>255){V=n[T]>>>18&31;wbits16(t,c,C[V+257]),c+=x[V+257],V>7&&(wbits(t,c,n[T]>>>23&31),c+=fleb[V]);var W=31&n[T];wbits16(t,c,O[W]),c+=M[W],W>3&&(wbits16(t,c,n[T]>>>5&8191),c+=fdeb[W])}else wbits16(t,c,C[n[T]]),c+=x[n[T]];return wbits16(t,c,C[256]),c+x[256]},deo=new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et=new u8(0),dflt=function(e,t,r,n,o,i){var a=e.length,s=new u8(n+a+5*(1+Math.ceil(a/7e3))+o),l=s.subarray(n,s.length-o),u=0;if(!t||a<8)for(var c=0;c<=a;c+=65535){var f=c+65535;f>=a&&(l[u>>3]=i),u=wfblk(l,u+1,e.subarray(c,f))}else{for(var p=deo[t-1],d=p>>>13,h=8191&p,m=(1<<r)-1,v=new u16(32768),y=new u16(m+1),g=Math.ceil(r/3),b=2*g,_=function(t){return(e[t]^e[t+1]<<g^e[t+2]<<b)&m},S=new u32(25e3),E=new u16(288),w=new u16(32),T=0,R=0,I=(c=0,0),A=0,N=0;c<a;++c){var C=_(c),x=32767&c,O=y[C];if(v[x]=O,y[C]=x,A<=c){var M=a-c;if((T>7e3||I>24576)&&M>423){u=wblk(e,l,0,S,E,w,R,I,N,c-N,u),I=T=R=0,N=c;for(var L=0;L<286;++L)E[L]=0;for(L=0;L<30;++L)w[L]=0}var k=2,D=0,P=h,$=x-O&32767;if(M>2&&C==_(c-$))for(var B=Math.min(d,M)-1,F=Math.min(32767,c),V=Math.min(258,M);$<=F&&--P&&x!=O;){if(e[c+k]==e[c+k-$]){for(var W=0;W<V&&e[c+W]==e[c+W-$];++W);if(W>k){if(k=W,D=$,W>B)break;var U=Math.min($,W-2),G=0;for(L=0;L<U;++L){var j=c-$+L+32768&32767,z=j-v[j]+32768&32767;z>G&&(G=z,O=j)}}}$+=(x=O)-(O=v[x])+32768&32767}if(D){S[I++]=268435456|revfl[k]<<18|revfd[D];var H=31&revfl[k],Y=31&revfd[D];R+=fleb[H]+fdeb[Y],++E[257+H],++w[Y],A=c+k,++T}else S[I++]=e[c],++E[e[c]]}}u=wblk(e,l,i,S,E,w,R,I,N,c-N,u),!i&&7&u&&(u=wfblk(l,u+1,et))}return slc(s,0,n+shft(u)+o)},crct=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var r=t,n=9;--n;)r=(1&r&&-306674912)^r>>>1;e[t]=r}return e}(),crc=function(){var e=-1;return{p:function(t){for(var r=e,n=0;n<t.length;++n)r=crct[255&r^t[n]]^r>>>8;e=r},d:function(){return~e}}},dopt=function(e,t,r,n,o){return dflt(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,r,n,!o)},wbytes=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},gzh=function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&wbytes(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var n=0;n<=r.length;++n)e[n+10]=r.charCodeAt(n)}},gzhl=function(e){return 10+(e.filename&&e.filename.length+1||0)};function gzipSync(e,t){t||(t={});var r=crc(),n=e.length;r.p(e);var o=dopt(e,t,gzhl(t),8),i=o.length;return gzh(o,t),wbytes(o,i-8,r.d()),wbytes(o,i-4,n),o}var td="undefined"!=typeof TextDecoder&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch(e){}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},minimal$1={exports:{}},indexMinimal={},minimal={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;return hasRequiredAspromise=1,aspromise=function(e,t){var r=new Array(arguments.length-1),n=0,o=2,i=!0;for(;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,a){r[n]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,a(e))}}))},aspromise}var base64$1={},hasRequiredBase64,eventemitter,hasRequiredEventemitter,float,hasRequiredFloat,inquire_1,hasRequiredInquire;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(e){var t=e;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var r=new Array(64),n=new Array(123),o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;t.encode=function(e,t,n){for(var o,i=null,a=[],s=0,l=0;t<n;){var u=e[t++];switch(l){case 0:a[s++]=r[u>>2],o=(3&u)<<4,l=1;break;case 1:a[s++]=r[o|u>>4],o=(15&u)<<2,l=2;break;case 2:a[s++]=r[o|u>>6],a[s++]=r[63&u],l=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return l&&(a[s++]=r[o],a[s++]=61,1===l&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var i="invalid encoding";t.decode=function(e,t,r){for(var o,a=r,s=0,l=0;l<e.length;){var u=e.charCodeAt(l++);if(61===u&&s>1)break;if(void 0===(u=n[u]))throw Error(i);switch(s){case 0:o=u,s=1;break;case 1:t[r++]=o<<2|(48&u)>>4,o=u,s=2;break;case 2:t[r++]=(15&o)<<4|(60&u)>>2,o=u,s=3;break;case 3:t[r++]=(3&o)<<6|u,s=0}}if(1===s)throw Error(i);return r-a},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}(base64$1)),base64$1}function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;function e(){this._listeners={}}return hasRequiredEventemitter=1,eventemitter=e,e.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},e.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},e.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this},eventemitter}function requireFloat(){if(hasRequiredFloat)return float;function e(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a}():function(){function i(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function a(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,a=8388607&n;return 255===i?a?NaN:o*(1/0):0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=i.bind(null,t),e.writeFloatBE=i.bind(null,r),e.readFloatLE=a.bind(null,n),e.readFloatBE=a.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a}():function(){function i(e,t,r,n,o,i){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((a<<31|2146435072)>>>0,o,i+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,o,i+t),e((a<<31|s/4294967296)>>>0,o,i+r);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(s=n*Math.pow(2,-l))>>>0,o,i+t),e((a<<31|l+1023<<20|1048576*s&1048575)>>>0,o,i+r)}}}function a(e,t,r,n,o){var i=e(n,o+t),a=e(n,o+r),s=2*(a>>31)+1,l=a>>>20&2047,u=4294967296*(1048575&a)+i;return 2047===l?u?NaN:s*(1/0):0===l?5e-324*s*u:s*Math.pow(2,l-1075)*(u+4503599627370496)}e.writeDoubleLE=i.bind(null,t,0,4),e.writeDoubleBE=i.bind(null,r,4,0),e.readDoubleLE=a.bind(null,n,0,4),e.readDoubleBE=a.bind(null,o,4,0)}(),e}function t(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function r(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function n(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}return hasRequiredFloat=1,float=e(e)}function requireInquire(){if(hasRequiredInquire)return inquire_1;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}return hasRequiredInquire=1,inquire_1=inquire,inquire_1}var utf8$2={},hasRequiredUtf8,pool_1,hasRequiredPool,longbits,hasRequiredLongbits,hasRequiredMinimal;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(e){var t=e;t.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},t.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],a=0;t<r;)(n=e[t++])<128?i[a++]=n:n>191&&n<224?i[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(n>>10),i[a++]=56320+(1023&n)):i[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},t.write=function(e,t,r){for(var n,o,i=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&o),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}}(utf8$2)),utf8$2}function requirePool(){if(hasRequiredPool)return pool_1;return hasRequiredPool=1,pool_1=function(e,t,r){var n=r||8192,o=n>>>1,i=null,a=n;return function(r){if(r<1||r>o)return e(r);a+r>n&&(i=e(n),a=0);var s=t.call(i,a,a+=r);return 7&a&&(a=1+(7|a)),s}}}function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=t;var e=requireMinimal();function t(e,t){this.lo=e>>>0,this.hi=t>>>0}var r=t.zero=new t(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var n=t.zeroHash="\0\0\0\0\0\0\0\0";t.fromNumber=function(e){if(0===e)return r;var n=e<0;n&&(e=-e);var o=e>>>0,i=(e-o)/4294967296>>>0;return n&&(i=~i>>>0,o=~o>>>0,++o>4294967295&&(o=0,++i>4294967295&&(i=0))),new t(o,i)},t.from=function(n){if("number"==typeof n)return t.fromNumber(n);if(e.isString(n)){if(!e.Long)return t.fromNumber(parseInt(n,10));n=e.Long.fromString(n)}return n.low||n.high?new t(n.low>>>0,n.high>>>0):r},t.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},t.prototype.toLong=function(t){return e.Long?new e.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var o=String.prototype.charCodeAt;return t.fromHash=function(e){return e===n?r:new t((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},t.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},t.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},t.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},t.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10},longbits}function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(e){var t=e;function r(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function n(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}t.asPromise=requireAspromise(),t.base64=requireBase64(),t.EventEmitter=requireEventemitter(),t.float=requireFloat(),t.inquire=requireInquire(),t.utf8=requireUtf8(),t.pool=requirePool(),t.LongBits=requireLongbits(),t.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),t.global=t.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"===_typeof(e)},t.isset=t.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==_typeof(r)||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,r){var n=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},t.merge=r,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=n,t.ProtocolError=n("ProtocolError"),t.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},t.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}}(minimal)),minimal}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};function writeByte(e,t,r){t[r]=255&e}function writeVarint32(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function writeFixed32(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Writer$1.create=create$1(),Writer$1.alloc=function(e){return new util$4.Array(e)},util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray)),Writer$1.prototype._push=function(e,t,r){return this.tail=this.tail.next=new Op(e,t,r),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer$1.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer$1.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer$1.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer$1.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer$1.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function(e){return this._push(util$4.float.writeFloatLE,4,e)},Writer$1.prototype.double=function(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer$1.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(e)){var r=Writer$1.alloc(t=base64.length(e));base64.decode(e,r,0),e=r}return this.uint32(t)._push(writeBytes,t,e)},Writer$1.prototype.string=function(e){var t=utf8$1.length(e);return t?this.uint32(t)._push(utf8$1.write,t,e):this._push(writeByte,1,0)},Writer$1.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer$1.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},Writer$1.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}function writeStringBuffer(e,t,r){e.length<40?util$3.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&"set"===util$3.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},BufferWriter.prototype.bytes=function(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,e),this},BufferWriter.prototype.string=function(e){var t=util$3.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this},BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create=function(){return util$2.Buffer?function(e){return(Reader$1.create=function(e){return util$2.Buffer.isBuffer(e)?new BufferReader$1(e):create_array(e)})(e)}:create_array},value;function readLongVarint(){var e=new LongBits(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.create=create(),Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice,Reader$1.prototype.uint32=(value=4294967295,function(){if(value=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return value;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return value}),Reader$1.prototype.int32=function(){return 0|this.uint32()},Reader$1.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader$1.prototype.bool=function(){return 0!==this.uint32()},Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader$1.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},Reader$1.prototype.string=function(){var e=this.bytes();return utf8.read(e,0,e.length)},Reader$1.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create(),BufferReader$1._configure();var t=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)},BufferReader.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader._configure();var rpc={},service=Service,util=requireMinimal(),exports;function Service(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,r,n,o,i){if(!o)throw TypeError("request must be specified");var a=this;if(!i)return util.asPromise(e,a,t,r,n,o);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,r){if(e)return a.emit("error",e,t),i(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),i(e)}return a.emit("data",r,t),i(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){i(e)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},exports=rpc,exports.Service=service;var roots={},module;!function(e){var t=e;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=writer,t.BufferWriter=writer_buffer,t.Reader=reader,t.BufferReader=reader_buffer,t.util=requireMinimal(),t.rpc=rpc,t.roots=roots,t.configure=r,r()}(indexMinimal),module=minimal$1,module.exports=indexMinimal;var $Writer=minimal$1.exports.Writer,$util=minimal$1.exports.util,$root=minimal$1.exports.roots.default||(minimal$1.exports.roots.default={}),opentelemetry=$root.opentelemetry=function(){var e,t,r,n,o,i={};return i.proto=((o={}).common=((t={}).v1=((e={}).AnyValue=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.stringValue=null,e.prototype.boolValue=null,e.prototype.intValue=null,e.prototype.doubleValue=null,e.prototype.arrayValue=null,e.prototype.kvlistValue=null,e.prototype.bytesValue=null,Object.defineProperty(e.prototype,"value",{get:$util.oneOfGetter(t=["stringValue","boolValue","intValue","doubleValue","arrayValue","kvlistValue","bytesValue"]),set:$util.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.stringValue&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),null!=e.boolValue&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),null!=e.intValue&&Object.hasOwnProperty.call(e,"intValue")&&t.uint32(24).int64(e.intValue),null!=e.doubleValue&&Object.hasOwnProperty.call(e,"doubleValue")&&t.uint32(33).double(e.doubleValue),null!=e.arrayValue&&Object.hasOwnProperty.call(e,"arrayValue")&&$root.opentelemetry.proto.common.v1.ArrayValue.encode(e.arrayValue,t.uint32(42).fork()).ldelim(),null!=e.kvlistValue&&Object.hasOwnProperty.call(e,"kvlistValue")&&$root.opentelemetry.proto.common.v1.KeyValueList.encode(e.kvlistValue,t.uint32(50).fork()).ldelim(),null!=e.bytesValue&&Object.hasOwnProperty.call(e,"bytesValue")&&t.uint32(58).bytes(e.bytesValue),t},e}(),e.ArrayValue=function(){function e(e){if(this.values=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.values=$util.emptyArray,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.values&&e.values.length)for(var r=0;r<e.values.length;++r)$root.opentelemetry.proto.common.v1.AnyValue.encode(e.values[r],t.uint32(10).fork()).ldelim();return t},e}(),e.KeyValueList=function(){function e(e){if(this.values=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.values=$util.emptyArray,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.values&&e.values.length)for(var r=0;r<e.values.length;++r)$root.opentelemetry.proto.common.v1.KeyValue.encode(e.values[r],t.uint32(10).fork()).ldelim();return t},e}(),e.KeyValue=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value=null,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&$root.opentelemetry.proto.common.v1.AnyValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},e}(),e.InstrumentationLibrary=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.version="",e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(18).string(e.version),t},e}(),e.InstrumentationScope=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.version="",e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(18).string(e.version),t},e}(),e),t),o.resource=((r={}).v1=function(){var e={};return e.Resource=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.attributes=$util.emptyArray,e.prototype.droppedAttributesCount=0,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)$root.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(10).fork()).ldelim();return null!=e.droppedAttributesCount&&Object.hasOwnProperty.call(e,"droppedAttributesCount")&&t.uint32(16).uint32(e.droppedAttributesCount),t},e}(),e}(),r),o.logs=((n={}).v1=function(){var e,t,r={};return r.LogsData=function(){function e(e){if(this.resourceLogs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resourceLogs=$util.emptyArray,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.resourceLogs&&e.resourceLogs.length)for(var r=0;r<e.resourceLogs.length;++r)$root.opentelemetry.proto.logs.v1.ResourceLogs.encode(e.resourceLogs[r],t.uint32(10).fork()).ldelim();return t},e}(),r.ResourceLogs=function(){function e(e){if(this.scopeLogs=[],this.instrumentationLibraryLogs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resource=null,e.prototype.scopeLogs=$util.emptyArray,e.prototype.instrumentationLibraryLogs=$util.emptyArray,e.prototype.schemaUrl="",e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.resource&&Object.hasOwnProperty.call(e,"resource")&&$root.opentelemetry.proto.resource.v1.Resource.encode(e.resource,t.uint32(10).fork()).ldelim(),null!=e.scopeLogs&&e.scopeLogs.length)for(var r=0;r<e.scopeLogs.length;++r)$root.opentelemetry.proto.logs.v1.ScopeLogs.encode(e.scopeLogs[r],t.uint32(18).fork()).ldelim();if(null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),null!=e.instrumentationLibraryLogs&&e.instrumentationLibraryLogs.length)for(var n=0;n<e.instrumentationLibraryLogs.length;++n)$root.opentelemetry.proto.logs.v1.InstrumentationLibraryLogs.encode(e.instrumentationLibraryLogs[n],t.uint32(8002).fork()).ldelim();return t},e}(),r.ScopeLogs=function(){function e(e){if(this.logRecords=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.scope=null,e.prototype.logRecords=$util.emptyArray,e.prototype.schemaUrl="",e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.scope&&Object.hasOwnProperty.call(e,"scope")&&$root.opentelemetry.proto.common.v1.InstrumentationScope.encode(e.scope,t.uint32(10).fork()).ldelim(),null!=e.logRecords&&e.logRecords.length)for(var r=0;r<e.logRecords.length;++r)$root.opentelemetry.proto.logs.v1.LogRecord.encode(e.logRecords[r],t.uint32(18).fork()).ldelim();return null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),t},e}(),r.InstrumentationLibraryLogs=function(){function e(e){if(this.logRecords=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.instrumentationLibrary=null,e.prototype.logRecords=$util.emptyArray,e.prototype.schemaUrl="",e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.instrumentationLibrary&&Object.hasOwnProperty.call(e,"instrumentationLibrary")&&$root.opentelemetry.proto.common.v1.InstrumentationLibrary.encode(e.instrumentationLibrary,t.uint32(10).fork()).ldelim(),null!=e.logRecords&&e.logRecords.length)for(var r=0;r<e.logRecords.length;++r)$root.opentelemetry.proto.logs.v1.LogRecord.encode(e.logRecords[r],t.uint32(18).fork()).ldelim();return null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),t},e}(),r.SeverityNumber=(e={},(t=Object.create(e))[e[0]="SEVERITY_NUMBER_UNSPECIFIED"]=0,t[e[1]="SEVERITY_NUMBER_TRACE"]=1,t[e[2]="SEVERITY_NUMBER_TRACE2"]=2,t[e[3]="SEVERITY_NUMBER_TRACE3"]=3,t[e[4]="SEVERITY_NUMBER_TRACE4"]=4,t[e[5]="SEVERITY_NUMBER_DEBUG"]=5,t[e[6]="SEVERITY_NUMBER_DEBUG2"]=6,t[e[7]="SEVERITY_NUMBER_DEBUG3"]=7,t[e[8]="SEVERITY_NUMBER_DEBUG4"]=8,t[e[9]="SEVERITY_NUMBER_INFO"]=9,t[e[10]="SEVERITY_NUMBER_INFO2"]=10,t[e[11]="SEVERITY_NUMBER_INFO3"]=11,t[e[12]="SEVERITY_NUMBER_INFO4"]=12,t[e[13]="SEVERITY_NUMBER_WARN"]=13,t[e[14]="SEVERITY_NUMBER_WARN2"]=14,t[e[15]="SEVERITY_NUMBER_WARN3"]=15,t[e[16]="SEVERITY_NUMBER_WARN4"]=16,t[e[17]="SEVERITY_NUMBER_ERROR"]=17,t[e[18]="SEVERITY_NUMBER_ERROR2"]=18,t[e[19]="SEVERITY_NUMBER_ERROR3"]=19,t[e[20]="SEVERITY_NUMBER_ERROR4"]=20,t[e[21]="SEVERITY_NUMBER_FATAL"]=21,t[e[22]="SEVERITY_NUMBER_FATAL2"]=22,t[e[23]="SEVERITY_NUMBER_FATAL3"]=23,t[e[24]="SEVERITY_NUMBER_FATAL4"]=24,t),r.LogRecordFlags=function(){var e={},t=Object.create(e);return t[e[0]="LOG_RECORD_FLAG_UNSPECIFIED"]=0,t[e[255]="LOG_RECORD_FLAG_TRACE_FLAGS_MASK"]=255,t}(),r.LogRecord=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timeUnixNano=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.observedTimeUnixNano=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.severityNumber=0,e.prototype.severityText="",e.prototype.body=null,e.prototype.attributes=$util.emptyArray,e.prototype.droppedAttributesCount=0,e.prototype.flags=0,e.prototype.traceId=$util.newBuffer([]),e.prototype.spanId=$util.newBuffer([]),e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(9).fixed64(e.timeUnixNano),null!=e.severityNumber&&Object.hasOwnProperty.call(e,"severityNumber")&&t.uint32(16).int32(e.severityNumber),null!=e.severityText&&Object.hasOwnProperty.call(e,"severityText")&&t.uint32(26).string(e.severityText),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&$root.opentelemetry.proto.common.v1.AnyValue.encode(e.body,t.uint32(42).fork()).ldelim(),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)$root.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(50).fork()).ldelim();return null!=e.droppedAttributesCount&&Object.hasOwnProperty.call(e,"droppedAttributesCount")&&t.uint32(56).uint32(e.droppedAttributesCount),null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(69).fixed32(e.flags),null!=e.traceId&&Object.hasOwnProperty.call(e,"traceId")&&t.uint32(74).bytes(e.traceId),null!=e.spanId&&Object.hasOwnProperty.call(e,"spanId")&&t.uint32(82).bytes(e.spanId),null!=e.observedTimeUnixNano&&Object.hasOwnProperty.call(e,"observedTimeUnixNano")&&t.uint32(89).fixed64(e.observedTimeUnixNano),t},e}(),r}(),n),o),i}(),VERSION$1="0.11.3",defaultHeaders={"Content-Type":"application/x-protobuf","Content-Encoding":"gzip","X-Rum-Magic":"1"},LogsData=opentelemetry.proto.logs.v1.LogsData;function isArray(e){return Array.isArray(e)}function isObject(e){return e&&"object"===_typeof(e)&&!isArray(e)}function convertToAnyValue(e){return isObject(e)?{kvlistValue:{values:Object.entries(e).map((function(e){var t=_slicedToArray(e,2);return{key:t[0],value:convertToAnyValue(t[1])}}))}}:isArray(e)?{arrayValue:{values:e.map((function(e){return convertToAnyValue(e)}))}}:"string"==typeof e?{stringValue:e}:"number"==typeof e?{doubleValue:e}:"boolean"==typeof e?{boolValue:e}:{}}var OTLPLogExporter=function(){function e(t){_classCallCheck(this,e),this.config=t}return _createClass(e,[{key:"constructLogData",value:function(e){var t;return{resourceLogs:[{resource:{attributes:convertToAnyValue((null===(t=this.config.resource)||void 0===t?void 0:t.attributes)||{}).kvlistValue.values},scopeLogs:[{scope:{name:"splunk.rr-web",version:VERSION$1},logRecords:e.map((function(e){return{body:convertToAnyValue(e.body),timeUnixNano:e.timeUnixNano,attributes:convertToAnyValue(e.attributes||{}).kvlistValue.values}}))}]}]}}},{key:"export",value:function(e){if(0!==e.length){var t=this.constructLogData(e);this.config.debug&&console.log("otlp request",t);var r=gzipSync(LogsData.encode(t).finish()),n=this.config.headers?Object.assign({},defaultHeaders,this.config.headers):defaultHeaders;fetch(this.config.beaconUrl,{method:"POST",body:r,headers:n})}}}]),e}(),SUPPRESS_TRACING_KEY=createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING"),TracesSamplerValues;function suppressTracing(e){return e.setValue(SUPPRESS_TRACING_KEY,!0)}window&&window.__read,window&&window.__values,window&&window.__read,function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"}(TracesSamplerValues||(TracesSamplerValues={}));var DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=1/0,DEFAULT_ATTRIBUTE_COUNT_LIMIT=128;DiagLogLevel.INFO,TracesSamplerValues.ParentBasedAlwaysOn,DiagLogLevel.ALL,DiagLogLevel.VERBOSE,DiagLogLevel.DEBUG,DiagLogLevel.INFO,DiagLogLevel.WARN,DiagLogLevel.ERROR,DiagLogLevel.NONE,"object"===("undefined"==typeof globalThis?"undefined":_typeof(globalThis))?globalThis:"object"===("undefined"==typeof self?"undefined":_typeof(self))?self:"object"===("undefined"==typeof window?"undefined":_typeof(window))?window:"object"!==("undefined"==typeof global?"undefined":_typeof(global))||global,Array(32);var VERSION="1.2.0",SemanticResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},TelemetrySdkLanguageValues={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"},_a,ExportResultCode,RPCType;_a={},_a[SemanticResourceAttributes.TELEMETRY_SDK_NAME]="opentelemetry",_a[SemanticResourceAttributes.PROCESS_RUNTIME_NAME]="browser",_a[SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]=TelemetrySdkLanguageValues.WEBJS,_a[SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=VERSION,function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"}(ExportResultCode||(ExportResultCode={})),window&&window.__values,function(e){e.HTTP="http"}(RPCType||(RPCType={}));var funcProto=Function.prototype,funcToString=funcProto.toString;funcToString.call(Object),window&&window.__values;var Deferred=function(){function e(){var e=this;this._promise=new Promise((function(t,r){e._resolve=t,e._reject=r}))}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),__read=window&&window.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spreadArray=window&&window.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};!function(){function e(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new Deferred}Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var e,t=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,__spreadArray([this._that],__read(r),!1))).then((function(e){return t._deferred.resolve(e)}),(function(e){return t._deferred.reject(e)}))}catch(e){this._deferred.reject(e)}}return this._deferred.promise}}();var BatchLogProcessor=function(){function e(t,r){var n=this;_classCallCheck(this,e),this.logs=[],this.scheduledDelayMillis=(null==r?void 0:r.scheduledDelayMillis)||5e3,this.exporter=t,window.addEventListener("unload",(function(){n._flushAll()}))}return _createClass(e,[{key:"onLog",value:function(e){var t=this;this.logs.push(e),void 0===this.timeout&&(this.timeout=setTimeout((function(){t.timeout=void 0,t._flushAll()}),this.scheduledDelayMillis))}},{key:"_flushAll",value:function(){var e=this;this.lastBatchSent=Date.now(),context.with(suppressTracing(context.active()),(function(){var t=e.logs.splice(0,e.logs.length);e.exporter.export(t)}))}}]),e}();function convert(e,t,r){return{body:e,timeUnixNano:t,attributes:r}}var MAX_RECORDING_LENGTH=3e5,MAX_CHUNK_SIZE=972800,encoder=new TextEncoder,decoder=new TextDecoder,inited=!1,tracer,startTime=0,capturing=!1,lastChunkTime=0,chunkI=1,SplunkRumRecorder={get inited(){return Boolean(inited)},init:function(e){if(!inited){var t=trace.getTracerProvider();if(t&&"getDelegate"in t&&(t=t.getDelegate()),null==t?void 0:t.resource){var r=t.resource,n=e.apiToken,o=e.beaconUrl,i=e.debug,a=__rest$1(e,["apiToken","beaconUrl","debug"]),s=(tracer=trace.getTracer("splunk.rr-web",VERSION$1)).startSpan("record init");if(s.isRecording()){s.end();var l={};n&&(l["X-SF-Token"]=n);var u=new OTLPLogExporter({beaconUrl:o,debug:i,headers:l,resource:r}),c=new BatchLogProcessor(u,{});startTime=Date.now(),capturing=!0,inited=record(Object.assign(Object.assign({maskAllInputs:!0,maskTextSelector:"*"},a),{emit:function(e){if(capturing)if(e.timestamp>startTime+MAX_RECORDING_LENGTH)capturing=!1;else{var t=e.timestamp;t>lastChunkTime&&(chunkI=1,lastChunkTime=t);for(var r=chunkI++,n=encoder.encode(JSON.stringify(e)),o=0;o<n.byteLength;o+=MAX_CHUNK_SIZE){var a=convert(decoder.decode(n.slice(o,o+MAX_CHUNK_SIZE)),t,{"splunk.rr-web.chunk":r});i&&console.log(a),c.onLog(a)}}}}))}}else console.error("Splunk OTEL Web must be inited before recorder.")}},resume:function(){if(inited){var e=capturing;startTime=Date.now(),capturing=!0,e||(record.takeFullSnapshot(),tracer.startSpan("record resume").end())}},stop:function(){inited&&(capturing&&tracer.startSpan("record stop").end(),capturing=!1)},deinit:function(){inited&&(inited(),inited=!1)}};return SplunkRumRecorder}();
//# sourceMappingURL=splunk-otel-web-record.js.map
